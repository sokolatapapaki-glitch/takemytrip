<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>ÎŸÎ¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÏŒÏ‚ ÎŸÏÎ³Î±Î½Ï‰Ï„Î®Ï‚ Î¤Î±Î¾Î¹Î´Î¹Î¿Ï</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<link rel="manifest" href="manifest.json">
<link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/2983/2983787.png">
<link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2983/2983787.png">
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Comic Neue',Arial,Helvetica,sans-serif;background:#f0f8ff;margin:0;display:flex;background-image:linear-gradient(rgba(255,255,255,0.25),rgba(255,255,255,0.4)),url('https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?w=1200');background-size:cover;background-position:center;background-attachment:fixed;background-repeat:no-repeat;image-rendering:-webkit-optimize-contrast;min-height:100vh}
.sidebar{width:250px;background:#3eb489;color:white;padding:20px;box-sizing:border-box}
.sidebar h2{font-size:20px;margin-top:0}
.step{margin-bottom:20px;padding:10px;background:rgba(255,255,255,0.2);border-radius:12px;cursor:pointer;transition:background 0.2s}
.step.active{background:rgba(255,255,255,0.5)}
.main{flex:1;padding:20px;box-sizing:border-box;overflow-y:auto}
.section{display:none}
.section.active{display:block}
h1,h2{text-align:center;margin-bottom:20px}
h2{margin-bottom:10px}
label{display:block;margin-top:10px}
select,input[type=checkbox]{margin-top:5px}
#destination-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:20px}
.destination-card{border-radius:12px;padding:20px;min-height:140px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:'Comic Neue',cursive;font-size:1em;font-weight:500;background:#dfefff;box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:0.2s;cursor:pointer}
.destination-card:nth-child(2n){background:#dfffe0}
.destination-card:nth-child(3n){background:#fff0df}
.destination-card button{margin-top:10px;padding:8px 12px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer}
.family-options{display:flex;gap:10px;flex-wrap:wrap;margin-top:5px}
.destination-filters{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px;margin-bottom:20px}
.filter-group{background:#fff;padding:15px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.filter-group h3{margin-top:0;color:#3eb489;border-bottom:1px solid #eee;padding-bottom:8px}
.buttons-container{display:flex;gap:10px;margin:20px 0;justify-content:center;flex-wrap:wrap}
.family-members-container{background:white;padding:20px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.1);margin-bottom:30px;max-width:1000px;margin:auto}
.family-member-input{display:flex;align-items:center;gap:15px;margin-bottom:15px;padding:12px;background:#f8f9fa;border-radius:10px;flex-wrap:wrap}
.family-member-input input{padding:8px 12px;border-radius:8px;border:1px solid #ddd;font-family:'Comic Neue',Arial,Helvetica,sans-serif;font-size:16px}
.remove-member-btn{background:#dc3545;color:white;border:none;border-radius:6px;padding:6px 12px;cursor:pointer;font-size:14px}
.total-overall{max-width:1000px;margin:auto;margin-bottom:30px;background:#fff;padding:20px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.15);text-align:center;font-size:26px;font-weight:bold;color:#fff;background-color:#ff7f50}
button{padding:10px 20px;font-size:16px;border-radius:12px;border:none;background:#ff7f50;color:white;cursor:pointer;margin-top:10px;display:block;margin-left:auto;margin-right:auto;transition:transform 0.2s,box-shadow 0.2s}
#activities-container-wrapper{max-width:1200px;margin:0 auto;padding:0 20px}
#activities-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px;margin-top:20px}
.activity-card{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.1);padding:20px;min-height:200px;cursor:pointer;border:2px solid transparent;position:relative;transition:all 0.2s ease;display:block}
.activity-card:hover{box-shadow:0 6px 16px rgba(0,0,0,0.15);border-color:#ff7f50;transform:translateY(-2px)}
.activity-card.selected{border:3px solid #ff7f50;background-color:#fff8f0;box-shadow:0 6px 18px rgba(0,0,0,0.2)}
.activity-info h3{margin-top:0;font-size:1.3em;color:#2c3e50;margin-bottom:10px}
.activity-info p{margin:8px 0;font-size:1em;color:#555;line-height:1.5}
.activity-card .emoji-icon{font-size:40px;text-align:center;margin-bottom:15px;display:block}
.activity-card .star{position:absolute;top:15px;right:15px;font-size:28px;color:gold;opacity:0.3;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:opacity 0.3s}
.activity-card.selected .star{opacity:1;animation:pulse 1s infinite alternate}
@keyframes pulse{from{transform:scale(1)}to{transform:scale(1.2)}}
table.activity-table{width:100%;text-align:center;margin-top:8px;border-collapse:collapse;font-size:0.85em}
table.activity-table th,table.activity-table td{padding:4px}
.total{font-weight:bold;font-size:14px;margin-top:6px}
.step-5-btn-container{text-align:center;margin-top:30px}
.step-5-btn{padding:18px 40px;font-size:20px;border-radius:16px;background:#3eb489;color:white;border:none;cursor:pointer;transition:transform 0.2s,box-shadow 0.2s}
.summary-content{text-align:center;font-size:1.2em;padding:40px;border:2px dashed #3eb489;border-radius:15px;background:#e0fff0}
.summary-content a{font-size:1.5em;font-weight:bold;color:#ff7f50;text-decoration:none;display:block;margin-top:15px}
.mobile-nav{display:none!important;text-align:center;padding:10px;background:#3eb489;position:sticky;top:0;z-index:1000}
.mobile-nav select{width:90%;padding:12px;border-radius:8px;border:none;font-family:'Comic Neue',Arial,Helvetica,sans-serif;font-size:16px}
.leaflet-container{font-family:'Comic Neue',Arial,Helvetica,sans-serif}
@keyframes slideInBudget{from{opacity:0;transform:translateX(100px)}to{opacity:1;transform:translateX(0)}}
#budget-tracker{animation:slideInBudget 0.5s ease-out}
.pdf-loading{opacity:0.7;pointer-events:none}
.pdf-loading::after{content:' â³';animation:spin 1s linear infinite}
@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
@media (max-width:768px){body{flex-direction:column;display:block}.sidebar{display:none!important;width:0!important;height:0!important;padding:0!important;margin:0!important;overflow:hidden!important;position:absolute!important;visibility:hidden!important}
.mobile-nav{display:block!important;width:100%;position:sticky;top:0;z-index:1000;background:#3eb489;padding:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
.mobile-nav select{width:100%;max-width:500px;margin:0 auto;display:block;padding:12px 15px;font-size:16px;border-radius:8px;border:2px solid white;background:white}
.main{width:100%!important;padding:10px 15px!important;margin-left:0!important;max-width:100%!important}
#destination-cards{grid-template-columns:1fr!important;gap:10px}
.destination-card{padding:15px!important;margin:5px 0!important}
.destination-filters{grid-template-columns:1fr!important;gap:10px;padding:10px!important;margin:10px 0!important}
.filter-group{padding:15px!important;margin-bottom:10px!important}
.buttons-container{flex-direction:column;align-items:center}
.buttons-container button{width:100%;max-width:300px}
.family-member-input{flex-direction:column;align-items:flex-start;gap:10px}
.family-member-input input{width:100%}
#budget-tracker{position:fixed!important;top:10px!important;right:10px!important;left:10px!important;width:calc(100% - 20px)!important;max-width:none!important;min-width:auto!important;font-size:14px!important;padding:12px!important}
#pdf-export-btn{width:90%!important;padding:18px 20px!important;font-size:16px!important;margin:15px auto!important}
.activity-card{flex-direction:column!important;text-align:left!important;padding:15px!important;min-height:160px!important;max-height:200px!important;overflow:hidden!important;position:relative!important}
.activity-card .emoji-icon{font-size:28px!important;margin-bottom:10px!important;float:left!important;margin-right:15px!important}
.activity-card .star{position:absolute!important;top:10px!important;right:10px!important;font-size:24px!important;color:gold!important;text-shadow:0 2px 4px rgba(0,0,0,0.2);z-index:10!important;display:block!important}
.activity-info h3{font-size:1.1em!important;margin:0 0 8px 35px!important;line-height:1.2!important;max-height:2.4em!important;overflow:hidden!important}
.activity-info p{font-size:0.9em!important;line-height:1.4!important;margin:5px 0!important;max-height:4.2em!important;overflow:hidden!important;display:-webkit-box!important;-webkit-line-clamp:3!important;-webkit-box-orient:vertical!important}
table.activity-table{font-size:0.8em!important;margin-top:8px!important;width:100%!important}
table.activity-table th,table.activity-table td{padding:3px 2px!important}}
@media (max-width:640px){.sidebar{width:100%;height:auto;padding:10px}.main{padding:10px}.destination-card{min-height:120px;padding:15px}.activity-card{min-height:180px;padding:12px}table.activity-table{font-size:0.75em}table.activity-table th,table.activity-table td{padding:2px}#map-container{height:400px}}
</style>
</head>
<body>
<div class="sidebar"><h2>Î’Î®Î¼Î±Ï„Î± Î¤Î±Î¾Î¹Î´Î¹Î¿Ï</h2><div class="step active" data-target="step-destination">1. Î•Ï€Î¹Î»Î¿Î³Î® Î ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼Î¿Ï</div><div class="step" data-target="step-flight">2. Î•Ï€Î¹Î»Î¿Î³Î® Î Ï„Î®ÏƒÎ·Ï‚</div><div class="step" data-target="step-hotel">3. Î•Ï€Î¹Î»Î¿Î³Î® ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿Ï…</div><div class="step" data-target="step-activities">4. Î•Ï€Î¹Î»Î¿Î³Î® Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹Î¿Ï„Î®Ï„Ï‰Î½</div><div class="step" data-target="step-summary">5. Î—Î¼ÎµÏÎ®ÏƒÎ¹Î¿ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±</div><div class="step" data-target="step-map">6. Î”Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÏŒÏ‚ Î§Î¬ÏÏ„Î·Ï‚</div></div>
<div class="mobile-nav"><select onchange="activateStep(this.value)"><option value="step-destination">1. Î ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚</option><option value="step-flight">2. Î Ï„Î®ÏƒÎµÎ¹Ï‚</option><option value="step-hotel">3. ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î±</option><option value="step-activities">4. Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚</option><option value="step-summary">5. Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±</option><option value="step-map">6. Î§Î¬ÏÏ„Î·Ï‚</option></select></div>
<div class="main">
<div id="step-destination" class="section active">
<h1>Î•Ï€Î¹Î»Î¿Î³Î® Î ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼Î¿Ï</h1>
<div class="destination-filters">
<div class="filter-group"><h3>Î’Î±ÏƒÎ¹ÎºÎ¬ Î¦Î¯Î»Ï„ÏÎ±</h3><label>Î¤ÏÏ€Î¿Ï‚ Ï„Î±Î¾Î¹Î´Î¹ÏÏ„Î·:</label><select id="travel-type" onchange="toggleFamily()"><option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ...</option><option value="ÎœÏŒÎ½Î¿Ï‚">ÎœÏŒÎ½Î¿Ï‚</option><option value="Î–ÎµÏ…Î³Î¬ÏÎ¹">Î–ÎµÏ…Î³Î¬ÏÎ¹</option><option value="ÎŸÎ¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î±">ÎŸÎ¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î±</option><option value="Î Î±ÏÎ­Î± Ï†Î¯Î»Ï‰Î½">Î Î±ÏÎ­Î± Ï†Î¯Î»Ï‰Î½</option></select>
<div class="family-options" id="family-options" style="display:none"><label><input type="checkbox" value="ÎšÎ±ÏÏŒÏ„ÏƒÎ¹"> ÎšÎ±ÏÏŒÏ„ÏƒÎ¹</label><label><input type="checkbox" value="ÎœÎ¹ÎºÏÎ¬"> ÎœÎ¹ÎºÏÎ¬</label><label><input type="checkbox" value="ÎœÎµÎ³Î¬Î»Î±"> ÎœÎµÎ³Î¬Î»Î±</label><label><input type="checkbox" value="ÎˆÏ†Î·Î²Î¿Î¹"> ÎˆÏ†Î·Î²Î¿Î¹</label><label><input type="checkbox" value="Î†Î½Ï‰ Ï„Ï‰Î½ 18"> Î†Î½Ï‰ Ï„Ï‰Î½ 18</label></div>
<label>Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ· ÏƒÎµ ÏÏÎµÏ‚:</label><select id="distance"><option value="">ÎŒÎ»Î±</option><option value="1">ÎˆÏ‰Ï‚ 1</option><option value="2">ÎˆÏ‰Ï‚ 2</option><option value="3">ÎˆÏ‰Ï‚ 3</option><option value="4">ÎˆÏ‰Ï‚ 4</option><option value="5">Î Î¬Î½Ï‰ Î±Ï€ÏŒ 4</option></select>
<label>Î˜ÎµÏÎ¼Î¿ÎºÏÎ±ÏƒÎ¯Î±/Î§ÎµÎ¹Î¼ÏÎ½Î±Ï‚:</label><select id="weather"><option value="">ÎŒÎ»Î±</option><option value="Î Î¹Î¿ Î¶ÎµÏƒÏ„ÏŒ">Î Î¹Î¿ Î¶ÎµÏƒÏ„ÏŒ</option><option value="ÎŠÎ´Î¹Î±">ÎŠÎ´Î¹Î±</option><option value="Î Î¹Î¿ ÎºÏÏÎ¿">Î Î¹Î¿ ÎºÏÏÎ¿</option><option value="Î§Î¹ÏŒÎ½Î¹Î±">Î§Î¹ÏŒÎ½Î¹Î±</option></select></div>
<div class="filter-group"><h3>Î ÏÏŒÏƒÎ¸ÎµÏ„Î± Î¦Î¯Î»Ï„ÏÎ±</h3><label>Î˜ÎµÎ¼Î±Ï„Î¹ÎºÎ¬ Ï€Î¬ÏÎºÎ±:</label><select id="themeparks"><option value="">Î‘Î´Î¹Î±Ï†Î¿ÏÎ¿</option><option value="ÎÎ±Î¹">ÎÎ±Î¹</option></select>
<label>Î§ÏÎ¹ÏƒÏ„Î¿Ï…Î³ÎµÎ½Î½Î¹Î¬Ï„Î¹ÎºÎµÏ‚ Î±Î³Î¿ÏÎ­Ï‚:</label><select id="christmas"><option value="">Î‘Î´Î¹Î±Ï†Î¿ÏÎ¿</option><option value="ÎÎ±Î¹">ÎÎ±Î¹</option></select>
<label>Î ÏŒÏƒÎµÏ‚ Î¼Î­ÏÎµÏ‚ Î¸Î± Î¼ÎµÎ¯Î½ÎµÏ„Îµ;</label><div style="display:flex;gap:10px;align-items:center"><select id="days-stay" style="flex:1"><option value="">-- Î•Ï€Î¹Î»Î­Î¾Ï„Îµ --</option><option value="3">3 Î¼Î­ÏÎµÏ‚</option><option value="4">4 Î¼Î­ÏÎµÏ‚</option><option value="5">5 Î¼Î­ÏÎµÏ‚</option><option value="6">6 Î¼Î­ÏÎµÏ‚</option><option value="7">7 Î¼Î­ÏÎµÏ‚</option></select><button onclick="updateDaysStay()" style="padding:8px 12px;background:#3eb489;color:white;border:none;border-radius:6px;cursor:pointer;white-space:nowrap">ğŸ”„ Update</button></div>
<label>Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î¤Î±Î¾Î¹Î´Î¹Î¿Ï:</label><input type="number" id="travel-budget" placeholder="Ï€.Ï‡. 500" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-bottom:10px"><small style="color:#666">Î’Î¬Î»Ï„Îµ Ï„Î¿ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏŒ Ï€Î¿ÏƒÏŒ</small></div>
<div class="filter-group"><h3>Î•Ï€Î¹Î»Î¿Î³Î­Ï‚ Î”Î¹Î±ÎºÎ¿Ï€ÏÎ½</h3><label>Î¤ÏÏ€Î¿Ï‚ Î”Î¹Î±ÎºÎ¿Ï€ÏÎ½:</label><select id="vacation-type"><option value="">ÎŒÎ»Î±</option><option value="Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚">Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚</option><option value="Î¦Ï…ÏƒÎ¹ÎºÎ® ÎŸÎ¼Î¿ÏÏ†Î¹Î¬">Î¦Ï…ÏƒÎ¹ÎºÎ® ÎŸÎ¼Î¿ÏÏ†Î¹Î¬</option><option value="Î˜Î¬Î»Î±ÏƒÏƒÎ±">Î˜Î±Î»Î¬ÏƒÏƒÎ¹Î±</option><option value="Î ÏŒÎ»Î·">Î‘ÏƒÏ„Î¹ÎºÎ­Ï‚</option><option value="Î’Î¿Ï…Î½ÏŒ">Î’Î¿Ï…Î½ÏŒ</option></select>
<label>ÎšÏŒÏƒÏ„Î¿Ï‚ Î”Î¹Î±ÎºÎ¿Ï€ÏÎ½:</label><select id="cost-level"><option value="">ÎŒÎ»Î±</option><option value="ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ">ğŸ’° ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ</option><option value="ÎœÎ­Ï„ÏÎ¹Î¿">ğŸ’°ğŸ’° ÎœÎ­Ï„ÏÎ¹Î¿</option><option value="Î‘ÎºÏÎ¹Î²ÏŒ">ğŸ’°ğŸ’°ğŸ’° Î‘ÎºÏÎ¹Î²ÏŒ</option></select>
<label>ÎšÎ±Ï„Î¬Î»Î»Î·Î»Î¿ Î³Î¹Î±:</label><div class="family-options" id="suitability-options" style="display:flex;gap:10px;flex-wrap:wrap;margin-top:5px"><label><input type="checkbox" value="ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±"> ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±</label><label><input type="checkbox" value="Î‘ÎœÎ•Î‘"> Î‘ÎœÎ•Î‘</label><label><input type="checkbox" value="Î—Î»Î¹ÎºÎ¹Ï‰Î¼Î­Î½Î¿Î¹"> Î—Î»Î¹ÎºÎ¹Ï‰Î¼Î­Î½Î¿Î¹</label></div></div></div>
<div class="buttons-container"><button onclick="filterDestinations()">Î”ÎµÏ‚ Î ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼Î¿ÏÏ‚</button><button onclick="resetFilters()" style="background:#6c757d">ğŸ”„ Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬</button><button onclick="toggleQuickSelection()" style="background:#3eb489">ğŸ”½ ÎˆÏ‡Ï‰ Ï€ÏŒÎ»Î·</button><button onclick="clearAllData()" style="background:#dc3545">ğŸ—‘ï¸ Î”Î¹Î±Î³ÏÎ±Ï†Î® ÎŒÎ»Ï‰Î½</button></div>
<div id="quick-city-select" style="display:none;max-width:400px;margin:0 auto 20px auto;background:#fff;padding:15px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1)"><h3 style="margin-top:0;text-align:center">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï€ÏŒÎ»Î·</h3><select id="quick-city" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;font-family:'Comic Neue',Arial,Helvetica,sans-serif"><option value="">-- Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï€ÏŒÎ»Î· --</option></select><button onclick="selectQuickCity()" style="width:100%;padding:10px;margin-top:10px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer">Î•Ï€Î¹Î»Î¿Î³Î®</button></div>
<div id="destination-cards"></div></div>
<div id="step-flight" class="section"><h1>âœˆï¸ Î•Ï€Î¹Î»Î¿Î³Î® Î Ï„Î®ÏƒÎ·Ï‚</h1><div style="display:flex;justify-content:center;gap:30px;flex-wrap:wrap;margin-bottom:40px"><a href="https://www.google.com/flights" target="_blank"><button style="padding:20px 45px;font-size:20px;border-radius:18px;background:#b2f0e8;color:#004d40;border:none;cursor:pointer">ğŸŒ Google Flights</button></a><a href="https://www.skyscanner.net" target="_blank"><button style="padding:20px 45px;font-size:20px;border-radius:18px;background:#cce3ff;color:#002b5b;border:none;cursor:pointer">âœˆï¸ Skyscanner</button></a></div><div style="text-align:center"><button onclick="goToStep3()" style="padding:14px 30px;font-size:18px;border-radius:14px;background:#d4edda;color:#155724;border:none;cursor:pointer">â¡ï¸ Î£Ï…Î½Î­Ï‡ÎµÎ¹Î± ÏƒÏ„Î¿ Î’Î®Î¼Î± 3</button></div></div>
<div id="step-hotel" class="section"><h1>Î•Ï€Î¹Î»Î¿Î³Î® ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿Ï… ğŸ¨</h1><div style="max-width:600px;margin:auto;background:#dfefff;padding:20px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.1)"><h2>Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿Ï…</h2><label>Î ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚:</label><input type="text" id="hotel-destination" placeholder="Ï€.Ï‡. Î’Î¹Î­Î½Î½Î·" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-bottom:10px"><label>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î†Ï†Î¹Î¾Î·Ï‚:</label><input type="date" id="hotel-checkin" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-bottom:10px"><label>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Î½Î±Ï‡ÏÏÎ·ÏƒÎ·Ï‚:</label><input type="date" id="hotel-checkout" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-bottom:15px"><button onclick="searchHotels()">Î’ÏÎµÏ‚ ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î±</button><p style="margin-top:12px;font-size:0.9em;color:#555">Î¤Î¿ link Î±Î½Î¿Î¯Î³ÎµÎ¹ Ï„Î·Î½ Î­ÎºÎ´Î¿ÏƒÎ· Expedia Î³Î¹Î± Î•Ï…ÏÏÏ€Î·.</p><div style="text-align:center;margin-top:30px"><button onclick="goToStep4()" style="padding:14px 30px;font-size:18px;border-radius:14px;background:#ff7f50;color:white;border:none;cursor:pointer">â¡ï¸ Î£Ï…Î½Î­Ï‡ÎµÎ¹Î± ÏƒÏ„Î¿ Î’Î®Î¼Î± 4</button></div></div></div>
<div id="step-activities" class="section"><h1>ÎŸÎ¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÎ­Ï‚ Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚</h1><div class="total-overall" id="overall-total">Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚: 0 â‚¬</div>
<div class="family-members-container"><h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Î¤Î± ÎœÎ­Î»Î· Î¤Î·Ï‚ ÎŸÎ¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î±Ï‚</h2><div id="family-members-list"><div class="family-member-input"><span>ğŸ‘¨</span><input type="text" placeholder="ÎŒÎ½Î¿Î¼Î±" value="1Î¿Ï‚ Î•Î½Î®Î»Î¹ÎºÎ±Ï‚" class="member-name"><input type="number" placeholder="Î—Î»Î¹ÎºÎ¯Î±" value="" class="member-age" min="18" max="120"><span>ÎµÏ„ÏÎ½</span></div><div class="family-member-input"><span>ğŸ‘©</span><input type="text" placeholder="ÎŒÎ½Î¿Î¼Î±" value="2Î¿Ï‚ Î•Î½Î®Î»Î¹ÎºÎ±Ï‚" class="member-name"><input type="number" placeholder="Î—Î»Î¹ÎºÎ¯Î±" value="" class="member-age" min="18" max="120"><span>ÎµÏ„ÏÎ½</span></div></div>
<div style="margin:20px 0;text-align:center"><h3 style="color:#3eb489">â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎœÎµÎ»ÏÎ½</h3><div style="display:flex;justify-content:center;gap:15px;flex-wrap:wrap;margin:15px 0"><button onclick="addAdultMember()" style="background:#3eb489;color:white;padding:12px 25px;border:none;border-radius:10px;cursor:pointer;font-size:16px;font-weight:bold">ğŸ‘¨ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î•Î½Î®Î»Î¹ÎºÎ±</button><button onclick="addChildMember()" style="background:#4c7af0;color:white;padding:12px 25px;border:none;border-radius:10px;cursor:pointer;font-size:16px;font-weight:bold">ğŸ§’ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î Î±Î¹Î´Î¹Î¿Ï</button><button onclick="addBabyMember()" style="background:#ff7f50;color:white;padding:12px 25px;border:none;border-radius:10px;cursor:pointer;font-size:16px;font-weight:bold">ğŸ‘¶ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎœÏ‰ÏÎ¿Ï</button></div><button onclick="updateFamilyMembers()" style="background:#ff7f50;color:white;padding:12px 25px;border:none;border-radius:10px;cursor:pointer;font-size:16px;font-weight:bold;margin-top:10px">ğŸ”„ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·</button><p style="color:#666;font-size:0.9em;margin-top:10px">ğŸ’¡ Î“Î¹Î± Î·Î»Î¹ÎºÎ¯ÎµÏ‚ 60+ ÏƒÏ…Î¼Î²Î¿Ï…Î»ÎµÏ…Ï„ÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Î¼Î± sites</p></div></div>
<div style="text-align:center;margin:20px 0"><button onclick="calculateSmartCombos()" style="padding:15px 30px;font-size:18px;border-radius:14px;background:#9c27b0;color:white;border:none;cursor:pointer;font-weight:bold">ğŸ’° ÎˆÎ¾Ï…Ï€Î½Î¿ Combo</button></div>
<div id="activities-container-wrapper"><div id="activities-container"></div></div>
<div class="step-5-btn-container"><button class="step-5-btn" onclick="goToStep5()">â¡ï¸ ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ· Î’Î®Î¼Î± 5</button></div></div>
<div id="step-summary" class="section"><h1>âœ… Î¤ÎµÎ»Î¹ÎºÎ® Î£ÏÎ½Î¿ÏˆÎ·</h1><div id="summary-content" class="summary-content"></div><div style="text-align:center;margin-top:30px"><button onclick="goToStep6()" style="padding:14px 30px;font-size:18px;border-radius:14px;background:#3eb489;color:white;border:none;cursor:pointer">ğŸ—ºï¸ Î§Î¬ÏÏ„Î·Ï‚ (Î’Î®Î¼Î± 6)</button></div></div>
<div id="step-map" class="section"><h1>ğŸ—ºï¸ Î”Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÏŒÏ‚ Î§Î¬ÏÏ„Î·Ï‚</h1><div id="map-container" style="height:600px;margin:20px 0;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.1)"></div><div style="text-align:center"><button onclick="initializeSmartMap()" style="padding:12px 24px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px">ğŸ—ºï¸ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î§Î¬ÏÏ„Î·</button></div>
<div style="text-align:center;margin:15px 0"><button onclick="addCustomPointSmart()" style="padding:12px 24px;background:#9c27b0;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px;margin:5px">ğŸ† Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î£Î·Î¼ÎµÎ¯Î¿Ï…</button><button onclick="viewCustomPoints()" style="padding:12px 24px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px;margin:5px">ğŸ‘ï¸ Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ¬ Î£Î·Î¼ÎµÎ¯Î±</button></div>
<div id="custom-points-list" style="max-width:800px;margin:20px auto;display:none"><h3>ğŸŸ£ Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ¬ Î£Î·Î¼ÎµÎ¯Î±</h3><div id="custom-points-container"></div></div></div>
</div>
<script>
let familyMembers=[{name:"Î Î±Ï„Î­ÏÎ±Ï‚",age:42},{name:"ÎœÎ·Ï„Î­ÏÎ±",age:40}];
let selectedMarkersForRoute=[],currentRoutePolyline=null,selectedDestinationName="",selectedDaysStay=0,selectedBudget=0;
function addAdultMember(){const c=document.getElementById('family-members-list'),a=Array.from(c.querySelectorAll('.family-member-input')).filter(m=>m.querySelector('.member-name').value.includes('Î•Î½Î®Î»Î¹ÎºÎ±Ï‚')).length+1,d=document.createElement('div');d.className='family-member-input';d.innerHTML=`<span>ğŸ‘¨</span><input type="text" placeholder="ÎŒÎ½Î¿Î¼Î±" value="${a}Î¿Ï‚ Î•Î½Î®Î»Î¹ÎºÎ±Ï‚" class="member-name"><input type="number" placeholder="Î—Î»Î¹ÎºÎ¯Î±" value="" class="member-age" min="18" max="120"><span>ÎµÏ„ÏÎ½</span><button onclick="removeFamilyMember(this)" class="remove-member-btn">Ã—</button>`;c.appendChild(d)}
function addChildMember(){const c=document.getElementById('family-members-list'),a=Array.from(c.querySelectorAll('.family-member-input')).filter(m=>m.querySelector('.member-name').value.includes('Î Î±Î¹Î´Î¯')).length+1,d=document.createElement('div');d.className='family-member-input';d.innerHTML=`<span>ğŸ§’</span><input type="text" placeholder="ÎŒÎ½Î¿Î¼Î±" value="Î Î±Î¹Î´Î¯ ${a}" class="member-name"><input type="number" placeholder="Î—Î»Î¹ÎºÎ¯Î±" value="" class="member-age" min="6" max="17"><span>ÎµÏ„ÏÎ½</span><button onclick="removeFamilyMember(this)" class="remove-member-btn">Ã—</button>`;c.appendChild(d)}
function addBabyMember(){const c=document.getElementById('family-members-list'),a=Array.from(c.querySelectorAll('.family-member-input')).filter(m=>m.querySelector('.member-name').value.includes('ÎœÏ‰ÏÏŒ')).length+1,d=document.createElement('div');d.className='family-member-input';d.innerHTML=`<span>ğŸ‘¶</span><input type="text" placeholder="ÎŒÎ½Î¿Î¼Î±" value="ÎœÏ‰ÏÏŒ ${a}" class="member-name"><input type="number" placeholder="Î—Î»Î¹ÎºÎ¯Î±" value="" class="member-age" min="0" max="5"><span>ÎµÏ„ÏÎ½</span><button onclick="removeFamilyMember(this)" class="remove-member-btn">Ã—</button>`;c.appendChild(d)}
function removeFamilyMember(e){e.parentElement.remove()}
function updateFamilyMembers(){familyMembers=[];document.querySelectorAll('.family-member-input').forEach(e=>{const o=e.querySelector('.member-name'),c=e.querySelector('.member-age'),t=o.value,a=parseInt(c.value);t&&a>=0&&familyMembers.push({name:t,age:a})});saveToLocalStorage()}
function formatPrice(e){return e===undefined||e===null?"-":typeof e=="number"?e+"â‚¬":e}
const destinations=[{name:"Î’Î¹Î­Î½Î½Î·",dist:2,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ","Î‘ÎœÎ•Î‘","Î—Î»Î¹ÎºÎ¹Ï‰Î¼Î­Î½Î¿Î¹"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î— Î±Ï…Ï„Î¿ÎºÏÎ±Ï„Î¿ÏÎ¹ÎºÎ® Ï€ÏŒÎ»Î· Î¼Îµ Ï„Î± Ï€Î±Î»Î¬Ï„Î¹Î±, Ï„Î¿Ï…Ï‚ ÎºÎ®Ï€Î¿Ï…Ï‚ ÎºÎ±Î¹ Ï„Î± Î½ÏŒÏƒÏ„Î¹Î¼Î± schnitzel."},{name:"Î Î±ÏÎ¯ÏƒÎ¹",dist:3,weather:"ÎŠÎ´Î¹Î±",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î— ÏÎ¿Î¼Î±Î½Ï„Î¹ÎºÎ® Ï€ÏŒÎ»Î· Ï„Î¿Ï… Ï†Ï‰Ï„ÏŒÏ‚ Î¼Îµ Ï„Î¿Î½ Î ÏÏÎ³Î¿ Ï„Î¿Ï… Î†Î¹Ï†ÎµÎ» ÎºÎ±Î¹ Ï„Î± ÏŒÎ¼Î¿ÏÏ†Î± ÎºÎ±Ï†Î­."},{name:"Î¡ÏÎ¼Î·",dist:2,weather:"Î Î¹Î¿ Î¶ÎµÏƒÏ„ÏŒ",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î— Î±Î¹ÏÎ½Î¹Î± Ï€ÏŒÎ»Î· Î¼Îµ Ï„Î¿ ÎšÎ¿Î»Î¿ÏƒÏƒÎ±Î¯Î¿, Ï„Î·Î½ Î¡Ï‰Î¼Î±ÏŠÎºÎ® Î‘Î³Î¿ÏÎ¬ ÎºÎ±Î¹ Ï…Ï€Î­ÏÎ¿Ï‡Î· Î¹Ï„Î±Î»Î¹ÎºÎ® ÎºÎ¿Ï…Î¶Î¯Î½Î±."},{name:"Î›Î¿Î½Î´Î¯Î½Î¿",dist:4,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ","Î‘ÎœÎ•Î‘"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î— Î¼ÎµÎ³Î±Î»Î¿ÏÏ€Î¿Î»Î· Î¼Îµ Ï„Î¿ ÎœÏ€Î¹Î³Îº ÎœÏ€ÎµÎ½, Ï„Î¿ London Eye ÎºÎ±Î¹ Ï„Î± Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î¼Î¿Ï…ÏƒÎµÎ¯Î±."},{name:"Î†Î¼ÏƒÏ„ÎµÏÎ½Ï„Î±Î¼",dist:3,weather:"ÎŠÎ´Î¹Î±",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î— Ï€ÏŒÎ»Î· Ï„Ï‰Î½ ÎºÎ±Î½Î±Î»Î¹ÏÎ½, Ï„Ï‰Î½ Ï€Î¿Î´Î·Î»Î¬Ï„Ï‰Î½ ÎºÎ±Î¹ Ï„Ï‰Î½ ÏŒÎ¼Î¿ÏÏ†Ï‰Î½ Î³ÎµÏ†Ï…ÏÏÎ½."},{name:"Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·",dist:2,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ","Î—Î»Î¹ÎºÎ¹Ï‰Î¼Î­Î½Î¿Î¹"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î— ÏŒÎ¼Î¿ÏÏ†Î· Ï€ÏŒÎ»Î· Ï„Î¿Ï… Î”Î¿ÏÎ½Î±Î²Î· Î¼Îµ Ï„Î± Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î»Î¿Ï…Ï„ÏÎ¬ ÎºÎ±Î¹ ÎºÎ¬ÏƒÏ„ÏÎ±."},{name:"Î ÏÎ¬Î³Î±",dist:3,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î Î±ÏÎ±Î¼Ï…Î¸Î­Î½Î¹Î± Ï€ÏŒÎ»Î· Î¼Îµ Ï„Î· Î“Î­Ï†Ï…ÏÎ± Ï„Î¿Ï… ÎšÎ±ÏÏŒÎ»Î¿Ï… ÎºÎ±Î¹ Î±ÏƒÏ„ÏÎ¿Î½Î¿Î¼Î¹ÎºÏŒ ÏÎ¿Î»ÏŒÎ¹."},{name:"Î’ÎµÏÎ¿Î»Î¯Î½Î¿",dist:3,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ","Î‘ÎœÎ•Î‘"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î ÏŒÎ»Î· Î¼Îµ Ï€Î»Î¿ÏÏƒÎ¹Î± Î¹ÏƒÏ„Î¿ÏÎ¯Î±, Î¼Î¿Ï…ÏƒÎµÎ¯Î± ÎºÎ±Î¹ Î¼Î¿Î½Ï„Î­ÏÎ½Î± Î±ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ®."},{name:"ÎœÏŒÎ½Î±Ï‡Î¿",dist:2,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î’Î±Ï…Î±ÏÎ¹ÎºÎ® Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ±, ÎºÎ¿Î½Ï„Î¬ ÏƒÏ„Î¹Ï‚ Î†Î»Ï€ÎµÎ¹Ï‚, Î¼Îµ Ï„Î¿ BMW World."},{name:"ÎšÎ¿Î»Ï‰Î½Î¯Î±",dist:3,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"ÎœÎµÎ³Î¬Î»Î¿Ï‚ ÎºÎ±Î¸ÎµÎ´ÏÎ¹ÎºÏŒÏ‚ Î½Î±ÏŒÏ‚, ÏƒÎ¿ÎºÎ¿Î»Î¬Ï„Î± ÎºÎ±Î¹ Î¡Î·Î½Î±Î½Î¯Î±."},{name:"Î’Î±ÏÎºÎµÎ»ÏÎ½Î·",dist:3,weather:"Î Î¹Î¿ Î¶ÎµÏƒÏ„ÏŒ",themeparks:"ÎÎ±Î¹",christmas:"ÎŒÏ‡Î¹",vacationType:["Î˜Î¬Î»Î±ÏƒÏƒÎ±","Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"Î“ÎºÎ±Î¿Ï…Î½Ï„Î¯, Ï€Î±ÏÎ±Î»Î¯ÎµÏ‚, ÎºÎ±Î¹ Î· Sagrada Familia."},{name:"ÎœÎ±Î´ÏÎ¯Ï„Î·",dist:4,weather:"ÎŠÎ´Î¹Î±",themeparks:"ÎÎ±Î¹",christmas:"ÎŒÏ‡Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Î¼Îµ Ï€Î»Î¿ÏÏƒÎ¹Î± Ï€Î¿Î»Î¹Ï„Î¹ÏƒÏ„Î¹ÎºÎ® Î¶Ï‰Î® ÎºÎ±Î¹ Î Î¬ÏÎºÎ¿ Î¡ÎµÏ„Î¯ÏÎ¿."},{name:"Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±",dist:4,weather:"Î Î¹Î¿ Î¶ÎµÏƒÏ„ÏŒ",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎŒÏ‡Î¹",vacationType:["Î˜Î¬Î»Î±ÏƒÏƒÎ±","Î ÏŒÎ»Î·"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"Î Î¿ÏÏ„Î¿Î³Î±Î»Î¹ÎºÎ® Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Î¼Îµ Î³ÏÎ±Ï†Î¹ÎºÎ¬ Ï„ÎµÎ»ÎµÏ†ÎµÏÎ¯Îº ÎºÎ±Î¹ ÏŒÎ¼Î¿ÏÏ†Î± Î±ÎºÏÏ‰Ï„Î®ÏÎ¹Î±."},{name:"Î”Î¿Ï…Î²Î»Î¯Î½Î¿",dist:5,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎŒÏ‡Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"Î¦Î¹Î»ÏŒÎ¾ÎµÎ½Î· Ï€ÏŒÎ»Î· Î¼Îµ Ï€Î±Î¼Ï€, ÎºÎ¬ÏƒÏ„ÏÎ± ÎºÎ±Î¹ Ï„Î¿ Î’Î¹Î²Î»Î¯Î¿ Ï„Î¿Ï… Kells."},{name:"Î•Î´Î¹Î¼Î²Î¿ÏÏÎ³Î¿",dist:5,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎŒÏ‡Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"Î£ÎºÏ‰Ï„ÏƒÎ­Î¶Î¹ÎºÎ· Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Î¼Îµ ÎºÎ¬ÏƒÏ„ÏÎ¿ ÎºÎ±Î¹ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ ÎºÎ­Î½Ï„ÏÎ¿."},{name:"Î–Ï…ÏÎ¯Ï‡Î·",dist:2,weather:"Î§Î¹ÏŒÎ½Î¹Î±",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î¦Ï…ÏƒÎ¹ÎºÎ® ÎŸÎ¼Î¿ÏÏ†Î¹Î¬","Î ÏŒÎ»Î·"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ","Î—Î»Î¹ÎºÎ¹Ï‰Î¼Î­Î½Î¿Î¹"],bestSeason:["Î§ÎµÎ¹Î¼ÏÎ½Î±Ï‚","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î•Î»Î²ÎµÏ„Î¹ÎºÎ® Ï€ÏŒÎ»Î· Î¼Îµ Î»Î¯Î¼Î½Î·, ÏƒÎ¿ÎºÎ¿Î»Î±Ï„Î¿Ï€Î¿Î¹Î¯ÎµÏ‚ ÎºÎ±Î¹ ÎºÎ¿Î½Ï„Î¹Î½Î¬ Ï‡Î¹Î¿Î½Î¿Î´ÏÎ¿Î¼Î¹ÎºÎ¬."},{name:"Î“ÎµÎ½ÎµÏÎ·",dist:2,weather:"Î§Î¹ÏŒÎ½Î¹Î±",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î¦Ï…ÏƒÎ¹ÎºÎ® ÎŸÎ¼Î¿ÏÏ†Î¹Î¬"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ","Î—Î»Î¹ÎºÎ¹Ï‰Î¼Î­Î½Î¿Î¹"],bestSeason:["Î§ÎµÎ¹Î¼ÏÎ½Î±Ï‚","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î”Î¹ÎµÎ¸Î½Î®Ï‚ Ï€ÏŒÎ»Î·, Î»Î¯Î¼Î½Î· Î›ÎµÎ¼Î¬Î½ ÎºÎ±Î¹ ÎºÎ¿Î½Ï„Î¹Î½Î¬ Î²Î¿Ï…Î½Î¬."},{name:"ÎšÎ¿Ï€ÎµÎ³Ï‡Î¬Î³Î·",dist:4,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"Î”Î±Î½Î­Î¶Î¹ÎºÎ· Ï€ÏŒÎ»Î·, Ï€Î¬ÏÎºÎ¿ Î¤Î¯Î²Î¿Î»Î¹ ÎºÎ±Î¹ Î· ÎœÎ¹ÎºÏÎ® Î“Î¿ÏÎ³ÏŒÎ½Î±."},{name:"Î£Ï„Î¿ÎºÏ‡ÏŒÎ»Î¼Î·",dist:5,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"Î ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Ï„Î·Ï‚ Î£Î¿Ï…Î·Î´Î¯Î±Ï‚, Î½Î·ÏƒÎ¹Î¬ ÎºÎ±Î¹ Ï„Î¿ Î¼Î¿Ï…ÏƒÎµÎ¯Î¿ ABBA."},{name:"Î’Î¿Ï…ÎºÎ¿Ï…ÏÎ­ÏƒÏ„Î¹",dist:2,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î¡Î¿Ï…Î¼Î±Î½Î¹ÎºÎ® Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ±, Î¼Îµ Ï„Î¿ Î Î±Î»Î¬Ï„Î¹ Ï„Î¿Ï… ÎšÎ¿Î¹Î½Î¿Î²Î¿Ï…Î»Î¯Î¿Ï…."},{name:"ÎŒÏƒÎ»Î¿",dist:4,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î¦Ï…ÏƒÎ¹ÎºÎ® ÎŸÎ¼Î¿ÏÏ†Î¹Î¬","Î ÏŒÎ»Î·"],costLevel:"Î‘ÎºÏÎ¹Î²ÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹","Î†Î½Î¿Î¹Î¾Î·"],desc:"ÎÎ¿ÏÎ²Î·Î³Î¹ÎºÎ® Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ±, Ï†Î¹ÏŒÏÎ´ ÎºÎ±Î¹ Î¼Î¿Ï…ÏƒÎµÎ¯Î± Viking."},{name:"ÎœÎ¹Î»Î¬Î½Î¿",dist:2,weather:"ÎŠÎ´Î¹Î±",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Ï„Î·Ï‚ Î¼ÏŒÎ´Î±Ï‚ Î¼Îµ Ï„Î¿Î½ ÎµÎ½Ï„Ï…Ï€Ï‰ÏƒÎ¹Î±ÎºÏŒ ÎÏ„Î¿Ï…ÏŒÎ¼Î¿."},{name:"Î¦Î»Ï‰ÏÎµÎ½Ï„Î¯Î±",dist:2,weather:"ÎŠÎ´Î¹Î±",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"ÎœÎ­Ï„ÏÎ¹Î¿",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î— ÎºÎ±ÏÎ´Î¹Î¬ Ï„Î·Ï‚ Î‘Î½Î±Î³Î­Î½Î½Î·ÏƒÎ·Ï‚, Ï„Î­Ï‡Î½Î· ÎºÎ±Î¹ Î±ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ®."},{name:"ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¹Î½Î¿ÏÏ€Î¿Î»Î·",dist:2,weather:"ÎŠÎ´Î¹Î±",themeparks:"ÎÎ±Î¹",christmas:"ÎŒÏ‡Î¹",vacationType:["Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚","Î ÏŒÎ»Î·"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î“Î­Ï†Ï…ÏÎ± Î¼ÎµÏ„Î±Î¾Ï Î•Ï…ÏÏÏ€Î·Ï‚ ÎºÎ±Î¹ Î‘ÏƒÎ¯Î±Ï‚, Î‘Î³Î¯Î± Î£Î¿Ï†Î¯Î± ÎºÎ±Î¹ Ï€Î±Î¶Î¬ÏÎ¹Î±."},{name:"Î£ÏŒÏ†Î¹Î±",dist:1,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎŒÏ‡Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","Î¦Î¸Î¹Î½ÏŒÏ€Ï‰ÏÎ¿"],desc:"Î’Î¿Ï…Î»Î³Î±ÏÎ¹ÎºÎ® Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ±, Î¼Îµ Ï„Î¿Î½ ÎºÎ±Î¸ÎµÎ´ÏÎ¹ÎºÏŒ Ï„Î¿Ï… Î‘Î»ÎµÎ¾Î¬Î½Î´ÏÎ¿Ï… ÎÎ¹Î­Ï†ÏƒÎºÎ¹."},{name:"Î’Î±ÏÏƒÎ¿Î²Î¯Î±",dist:3,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î— Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Ï„Î·Ï‚ Î Î¿Î»Ï‰Î½Î¯Î±Ï‚ Î¼Îµ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ ÎºÎ­Î½Ï„ÏÎ¿ ÎºÎ±Î¹ ÏŒÎ¼Î¿ÏÏ†Î± Ï€Î¬ÏÎºÎ±."},{name:"ÎšÏÎ±ÎºÎ¿Î²Î¯Î±",dist:2,weather:"Î Î¹Î¿ ÎºÏÏÎ¿",themeparks:"ÎÎ±Î¹",christmas:"ÎÎ±Î¹",vacationType:["Î ÏŒÎ»Î·","Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚"],costLevel:"ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒ",suitableFor:["ÎÎµÎ¿Î³Î­Î½Î½Î·Ï„Î±","Î Î±Î¹Î´Î¹ÎºÏŒ"],bestSeason:["Î†Î½Î¿Î¹Î¾Î·","ÎšÎ±Î»Î¿ÎºÎ±Î¯ÏÎ¹"],desc:"Î— Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ® Ï€ÏŒÎ»Î· Î¼Îµ Ï„Î¿ Î²Î±ÏƒÎ¹Î»Î¹ÎºÏŒ ÎºÎ¬ÏƒÏ„ÏÎ¿ Wawel ÎºÎ±Î¹ Ï„Î·Î½ Ï€Î±Î»Î¹Î¬ Ï€ÏŒÎ»Î·."}];
function toggleFamily(){document.getElementById("family-options").style.display=document.getElementById("travel-type").value==="ÎŸÎ¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î±"?"flex":"none"}
function toggleQuickSelection(){const e=document.getElementById('quick-city-select');e&&(e.style.display=e.style.display==='none'?'block':'none',document.getElementById('quick-city').options.length<=1&&fillQuickCityDropdown())}
function filterDestinations(){const e=document.getElementById("distance").value,t=document.getElementById("weather").value,n=document.getElementById("themeparks").value,o=document.getElementById("christmas").value,a=document.getElementById("vacation-type").value,i=document.getElementById("cost-level").value,c=[];document.querySelectorAll('#suitability-options input[type="checkbox"]:checked').forEach(e=>{c.push(e.value)});const r=document.getElementById("travel-budget").value;r&&(selectedBudget=parseInt(r));const d=destinations.filter(s=>{let l=!0;return e&&e!==""&&(e==="5"?l=l&&s.dist>4:l=l&&s.dist<=parseInt(e)),t&&t!==""&&(l=l&&s.weather===t),n&&n!==""&&(l=l&&(n==="ÎÎ±Î¹"?s.themeparks==="ÎÎ±Î¹":!0)),o&&o!==""&&(l=l&&(o==="ÎÎ±Î¹"?s.christmas==="ÎÎ±Î¹":!0)),a&&a!==""&&(l=l&&s.vacationType&&s.vacationType.includes(a)),i&&i!==""&&(l=l&&s.costLevel===i),c.length>0&&(l=l&&c.some(e=>s.suitableFor&&s.suitableFor.includes(e))),l}),l=document.getElementById("destination-cards");l.innerHTML="";if(d.length===0){l.innerHTML="<p>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Ï€ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼Î¿Î¯.</p>";return}d.forEach(e=>{const t=document.createElement("div");t.className="destination-card",t.innerHTML=`<h3>${e.name}</h3><p>${e.desc}</p><button onclick="selectDestination('${e.name}')">Î£Î¥ÎÎ•Î§Î•Î™Î‘ Î’Î—ÎœÎ‘ 2</button>`,l.appendChild(t)})}
function selectDestination(e){selectedDestinationName=e,updateCityBackground(e),goToStep2()}
function goToStep2(){activateStep('step-flight')}
function goToStep3(){activateStep('step-hotel'),document.getElementById("hotel-destination").value=selectedDestinationName}
function searchHotels(){window.open('https://www.tkqlhce.com/click-101567631-13853200','_blank');const e=document.createElement('img');e.src='https://www.lduhtrp.net/image-101567631-13853200',e.width=1,e.height=1,e.border=0,document.body.appendChild(e)}
async function goToStep4(){activateStep('step-activities');const e=await loadCityActivities(selectedDestinationName);if(!e||e.activities.length===0){document.getElementById("step-activities").querySelector('h1').innerText=`Î’Î®Î¼Î± 4: ${selectedDestinationName||'Î§Ï‰ÏÎ¯Ï‚ Î•Ï€Î¹Î»Î¿Î³Î®'}`;const t=document.getElementById("activities-container");t.style.display='block',document.getElementById("overall-total").style.display='none',document.querySelector('.step-5-btn-container').style.display='none',t.innerHTML=`<div style="text-align:center;font-size:1.5em;color:#ff6b6b;padding:40px;border:2px dashed #ff6b6b;border-radius:15px;background:#fff;margin:20px"><h3>ğŸ—ï¸ Î¥Î ÎŸ ÎšÎ‘Î¤Î‘Î£ÎšÎ•Î¥Î—</h3><p>ÎŸÎ¹ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚ Î³Î¹Î± <strong>${selectedDestinationName}</strong> Ï€ÏÎ¿ÏƒÏ„Î¯Î¸ÎµÎ½Ï„Î±Î¹ ÏƒÏÎ½Ï„Î¿Î¼Î±!</p><button onclick="activateStep('step-destination')" style="padding:12px 24px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px;margin-top:15px">â†©ï¸ Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î¿ Î’Î®Î¼Î± 1</button></div>`;return}document.getElementById("step-activities").querySelector('h1').innerText=`ÎŸÎ¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÎ­Ï‚ Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚ - ${e.name}`,window.currentCityActivities=e.activities;const t=localStorage.getItem('travelPlannerData');if(t){const n=JSON.parse(t);if(n.selectedDestinationName===selectedDestinationName&&n.selectedActivities&&n.selectedActivities.length>0){window.currentCityActivities=e.activities.map(e=>{const t=n.selectedActivities.includes(e.name);return{...e,selected:t}})}else window.currentCityActivities=e.activities}else window.currentCityActivities=e.activities;createActivityCardsNew(window.currentCityActivities),updateFamilyMembers(),calculateAllCostsNew(),saveToLocalStorage()}
function goToStep5(){preloadLeaflet();const e=document.getElementById("days-stay");selectedDaysStay=e.value?parseInt(e.value):0,activateStep('step-summary');const t=document.getElementById('summary-content');if(!selectedDestinationName){t.innerHTML=`<h3>âš ï¸ Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ ÎµÏ€Î¹Î»Î­Î¾ÎµÎ¹ Ï€ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼ÏŒ</h3><button onclick="activateStep('step-destination')" style="padding:10px 20px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;margin-top:10px">Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î¿ Î’Î®Î¼Î± 1</button>`;return}const n=window.currentCityActivities?window.currentCityActivities.filter(e=>e.selected===!0):[],o=selectedDaysStay>0?`${selectedDaysStay} Î¼Î­ÏÎµÏ‚`:"Î¼Î· Î¿ÏÎ¹ÏƒÎ¼Î­Î½ÎµÏ‚ Î¼Î­ÏÎµÏ‚";if(n.length>0){const a=createSmartDailyProgram(n,selectedDaysStay||1),i=calculateDistances(n);t.innerHTML=`<h3>âœ… Î¤Î¿ Ï€ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒ ÏƒÎ±Ï‚ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î³Î¹Î± ${o} ÏƒÏ„Î·Î½ ${selectedDestinationName}!</h3><div style="background:#e8f5e8;padding:15px;border-radius:10px;border:2px solid #3eb489;margin:15px 0"><strong>ğŸ“… Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±:</strong>${a}</div>${i}<div style="background:#fff3cd;padding:15px;border-radius:10px;border:1px solid #ffeaa7;margin:15px 0"><strong>Î•Ï€Î¹Î»ÎµÎ³Î¼Î­Î½ÎµÏ‚ (${n.length}):</strong><ul>${n.map(e=>`<li>${e.name}</li>`).join('')}</ul></div>`,t.style.border='2px dashed #3eb489',t.style.background='#e0fff0'}else t.innerHTML=`<h3>${selectedDestinationName} - Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± ${o}</h3><p>Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ ÎµÏ€Î¹Î»Î­Î¾ÎµÎ¹ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚.</p><button onclick="activateStep('step-activities')" style="padding:10px 20px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;margin-top:10px">Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î¿ Î’Î®Î¼Î± 4</button>`,t.style.border='2px dashed #3eb489',t.style.background='#e0fff0'}
function activateStep(e){document.querySelectorAll('.step').forEach(t=>t.classList.remove('active')),document.querySelectorAll('.section').forEach(t=>t.classList.remove('active')),document.querySelector(`[data-target="${e}"]`).classList.add('active'),document.getElementById(e).classList.add('active'),window.scrollTo({top:0,behavior:'smooth'})}
function createActivityCards(e){const t=document.getElementById('activities-container');t.innerHTML="",e.forEach((n,o)=>{const a=document.createElement('div');a.className="activity-card",a.id=`activity-${o}`,a.innerHTML=`<span class="emoji-icon">ğŸ“</span><span class="star">â­</span><div class="activity-info"><h3>${n.name}</h3><p>${n.desc}</p>${n.website?`<a href="${n.website}" target="_blank" style="color:#3eb489;font-weight:bold;text-decoration:none;display:inline-block;margin-top:10px">ğŸ”— Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±</a>`:""}<table class="activity-table"><tr><th>0-2</th><th>3-5</th><th>6-14</th><th>15-19</th><th>18+</th></tr><tr><td>${formatPrice(n.prices["0-2"])}</td><td>${formatPrice(n.prices["3-5"])}</td><td>${formatPrice(n.prices["6-14"])}</td><td>${formatPrice(n.prices["15-19"])}</td><td>${formatPrice(n.prices["18+"])}</td></tr></table><div class="total" id="total-${o}">ÎšÏŒÏƒÏ„Î¿Ï‚: 0 â‚¬</div></div>`,a.addEventListener('click',(()=>{a.classList.toggle('selected'),e[o].selected=!e[o].selected,calculateAllCosts(),saveToLocalStorage()})),t.appendChild(a)})}
function calculateAllCosts(e=null){updateFamilyMembers();let t=0;const n=window.currentCityActivities||[];n.forEach((n,o)=>{const a=document.getElementById(`activity-${o}`),i=a?a.classList.contains('selected'):!1;n.selected=i,i&&(let r=0;familyMembers.forEach(e=>{const t=e.age;let o=0;n.prices&&n.prices[t]!==undefined?o=n.prices[t]:n.prices&&n.prices.adult!==undefined&&(o=n.prices.adult),r+=o}),document.getElementById(`total-${o}`)&&(document.getElementById(`total-${o}`).innerText=`ÎšÏŒÏƒÏ„Î¿Ï‚: ${r.toFixed(2)} â‚¬`),t+=r),document.getElementById(`total-${o}`)&&!i&&(document.getElementById(`total-${o}`).innerText=`ÎšÏŒÏƒÏ„Î¿Ï‚: 0 â‚¬`)});const o=document.getElementById('overall-total');o&&(o.innerText=`Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚: ${t.toFixed(2)} â‚¬`),selectedBudget>0&&(const a=document.getElementById('budget-status')||document.createElement('div');a.id='budget-status',a.style.cssText="max-width:1000px;margin:20px auto;padding:15px;border-radius:16px;text-align:center;font-size:18px;font-weight:bold";const i=selectedBudget-t;if(i>=0)a.style.background='#d4edda',a.style.color='#155724',a.style.border='2px solid #28a745',a.innerHTML=`ğŸ’° <strong>Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚:</strong> ${selectedBudget}â‚¬ | ğŸ“Š <strong>ÎÎ¿Î´ÎµÏÏ„Î·ÎºÎµ:</strong> ${t.toFixed(2)}â‚¬ | âœ… <strong>Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿:</strong> ${i.toFixed(2)}â‚¬`;else{a.style.background='#f8d7da',a.style.color='#721c24',a.style.border='2px solid #dc3545';a.innerHTML=`ğŸ’° <strong>Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚:</strong> ${selectedBudget}â‚¬ | ğŸ“Š <strong>ÎÎ¿Î´ÎµÏÏ„Î·ÎºÎµ:</strong> ${t.toFixed(2)}â‚¬ | âŒ <strong>Î¥Ï€Î­ÏÎ²Î±ÏƒÎ·:</strong> ${Math.abs(i).toFixed(2)}â‚¬`}document.getElementById('budget-status')||document.getElementById('activities-container-wrapper').parentNode.insertBefore(a,document.getElementById('activities-container-wrapper')))} 
document.querySelectorAll('.step').forEach(e=>{e.addEventListener('click',(()=>{const t=e.dataset.target;t==='step-activities'?goToStep4():t==='step-summary'?goToStep5():t==='step-map'?goToStep6():activateStep(t)}))})
function fillQuickCityDropdown(){const e=document.getElementById('quick-city');e.innerHTML='<option value="">-- Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï€ÏŒÎ»Î· --</option>',[...destinations].sort(((e,t)=>e.name.localeCompare(t.name,'el'))).forEach(t=>{const n=document.createElement('option');n.value=t.name,n.textContent=t.name,e.appendChild(n)})}
function selectQuickCity(){const e=document.getElementById('quick-city').value,t=document.getElementById("days-stay").value;if(e){selectedDestinationName=e,updateCityBackground(e),selectedDaysStay=t?parseInt(t):0;const n=document.getElementById("travel-budget").value;n&&(selectedBudget=parseInt(n)),updateStep1Display(),document.getElementById('quick-city-select').style.display='none'}else alert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¹Î± Ï€ÏŒÎ»Î·')}
function getSelectedActivities(){return window.currentCityActivities&&window.currentCityActivities.length>0?window.currentCityActivities.filter(e=>e.selected===!0):[]}
function createSmartDailyProgram(e,t){const n=e.filter(e=>e.lat&&e.lng);if(0===n.length){if(!e||0===e.length)return'<p>Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ ÎµÏ€Î¹Î»Î­Î¾ÎµÎ¹ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚.</p>';t||(t=1);let n='<p>ğŸ—ºï¸ <strong>Î‘Ï€Î»ÏŒ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±:</strong></p>';const o=Math.ceil(e.length/t);for(let a=0;a<t;a++){const t=a*o,i=Math.min(t+o,e.length),c=e.slice(t,i);if(0===c.length)continue;const r=c.slice(0,Math.ceil(c.length/2)),d=c.slice(Math.ceil(c.length/2));n+=`<div style="margin:15px 0;padding:12px;background:white;border-radius:8px;border-left:4px solid #ff7f50"><h4 style="margin:0 0 8px 0;color:#ff7f50">ğŸ“ Î—Î¼Î­ÏÎ± ${a+1}</h4>${r.length>0?`<div style="margin-bottom:8px"><h5 style="margin:0 0 4px 0;color:#3eb489">ğŸŒ… Î ÏÏ‰Î¹Î½ÏŒ (9:00-13:00)</h5><ul style="margin:0;padding-left:20px">${r.map(e=>`<li>${e.name}</li>`).join('')}</ul></div>`:''}${d.length>0?`<div style="margin-bottom:6px"><h5 style="margin:0 0 4px 0;color:#4c7af0">ğŸŒ‡ Î‘Ï€Î¿Î³ÎµÏ…Î¼Î±Ï„Î¹Î½ÏŒ (14:00-18:00)</h5><ul style="margin:0;padding-left:20px">${d.map(e=>`<li>${e.name}</li>`).join('')}</ul></div>`:''}</div>`}return n}const o=createSmartClusters(n,t);let a='<p>ğŸ—ºï¸ <strong>ÎˆÎ¾Ï…Ï€Î½Î¿ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±:</strong></p>';return o.forEach(((e,t)=>{const n=e.slice(0,Math.ceil(e.length/2)),o=e.slice(Math.ceil(e.length/2));a+=`<div style="margin:15px 0;padding:12px;background:white;border-radius:8px;border-left:4px solid #ff7f50"><h4 style="margin:0 0 8px 0;color:#ff7f50">ğŸ“ Î—Î¼Î­ÏÎ± ${t+1} - ÎˆÎ¾Ï…Ï€Î½Î¿ Î Î»Î¬Î½Î¿</h4>${n.length>0?`<div style="margin-bottom:8px"><h5 style="margin:0 0 4px 0;color:#3eb489">ğŸŒ… Î ÏÏ‰Î¹Î½ÏŒ (9:00-13:00)</h5><ul style="margin:0;padding-left:20px">${n.map(e=>`<li>${e.name}</li>`).join('')}</ul></div>`:''}${o.length>0?`<div style="margin-bottom:6px"><h5 style="margin:0 0 4px 0;color:#4c7af0">ğŸŒ‡ Î‘Ï€Î¿Î³ÎµÏ…Î¼Î±Ï„Î¹Î½ÏŒ (14:00-18:00)</h5><ul style="margin:0;padding-left:20px">${o.map(e=>`<li>${e.name}</li>`).join('')}</ul></div>`:''}<div style="background:#f8f9fa;padding:6px;border-radius:4px;margin-top:6px"><p style="margin:0;font-size:0.8em;color:#666">âœ… Î’ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· | ğŸš¶ Î•Î»Î¬Ï‡Î¹ÏƒÏ„ÎµÏ‚ ÎœÎµÏ„Î±ÎºÎ¹Î½Î®ÏƒÎµÎ¹Ï‚ | â±ï¸ Î™ÏƒÎ¿ÏÏÎ¿Ï€Î·Î¼Î­Î½Î¿Ï‚ Î§ÏÏŒÎ½Î¿Ï‚</p></div></div>`})),a}
function createSmartClusters(e,t){if(e.length<=t){const n=[];for(let o=0;o<t;o++)n.push(e[o]?[e[o]]:[]);return n.filter(e=>e.length>0)}const n=e.reduce(((e,t)=>e+t.lat),0)/e.length,o=e.reduce(((e,t)=>e+t.lng),0)/e.length,a=e.map(e=>({...e,distance:Math.sqrt(Math.pow(e.lat-n,2)+Math.pow(e.lng-o,2))})),i=[...a].sort(((e,t)=>e.distance-t.distance)),c=Math.ceil(i.length/t),r=[];for(let d=0;d<t;d++){const t=d*c,a=t+c,s=i.slice(t,a).map(e=>{const{distance:t,...a}=e;return a});s.length>0&&(s.sort(((e,t)=>e.lat-t.lat)),r.push(s))}return r}
function goToStep6(){activateStep('step-map')}
function preloadLeaflet(){typeof L=="undefined"&&(!document.querySelector('link[href*="leaflet"]')&&(const e=document.createElement('link');e.rel='stylesheet',e.href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css',document.head.appendChild(e)),!document.querySelector('script[src*="leaflet"]')&&(const e=document.createElement('script');e.src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js',document.head.appendChild(e)))}
function initializeSmartMap(){const e=window.currentCityActivities?window.currentCityActivities.filter(e=>e.selected===!0):[];document.getElementById('map-container').innerHTML='<div id="smart-map" style="height:100%;width:100%"></div>';let t,n;selectedDestinationName.includes("Î’ÎµÏÎ¿Î»Î¯Î½Î¿")?(t=[52.52,13.405],n=12):selectedDestinationName.includes("Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±")?(t=[38.7223,-9.1393],n=13):selectedDestinationName.includes("Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·")?(t=[47.4979,19.0402],n=13):(t=[48.2082,16.3738],n=13);const o=L.map('smart-map').setView(t,n);window.currentMap=o,L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'Â© OpenStreetMap contributors'}).addTo(o),e.length>0&&addActivityMarkers(o,e),addMapCloseButton(document.getElementById('map-container'),o),loadCustomPointsOnMap()}
function addActivityMarkers(e,t){let n=[],o='green';selectedDestinationName.includes("Î’ÎµÏÎ¿Î»Î¯Î½Î¿")?o='blue':selectedDestinationName.includes("Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±")?o='red':selectedDestinationName.includes("Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·")?o='orange':selectedDestinationName.includes("Î’Î¹Î­Î½Î½Î·")&&(o='green'),t.forEach(((t,a)=>{if(!t.location||t.location.lat===undefined)return;const i=t.location.lat,c=t.location.lng,r=L.icon({iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${o}.png`,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),d=L.marker([i,c],{icon:r}).addTo(e);d.bindPopup(createPopupContent(t)),d.on('click',(function(){handleMarkerClick(d,n,e,t)}))}));if(t.length>0){const n=t.filter(e=>e.location&&e.location.lat!==undefined).map(e=>[e.location.lat,e.location.lng]);n.length>0&&e.fitBounds(L.latLngBounds(n),{padding:[50,50],maxZoom:15})}}
function createPopupContent(e){const t=e.name||e.title||'Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±',n=e.description||e.desc||'',o=e.restaurant||'Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯Î±',a=e.website||'';return`<div style="max-width:280px"><h4 style="margin:0 0 8px 0;color:#3eb489">${t}</h4><p style="margin:0 0 8px 0;font-size:0.9em">${n}</p><div style="margin:6px 0;font-size:0.9em"><strong>ğŸ½ï¸ ÎšÎ¿Î½Ï„Î¹Î½ÏŒ Î•ÏƒÏ„Î¹Î±Ï„ÏŒÏÎ¹Î¿:</strong><br>${o}</div>${a?`<a href="${a}" target="_blank" style="color:#3eb489;font-weight:bold;text-decoration:none">ğŸ”— Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±</a>`:''}</div>`}
function addMapCloseButton(e,t){const n=document.createElement('button');n.textContent='âœ–ï¸ ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ Î§Î¬ÏÏ„Î·',n.style.cssText="position:absolute;top:15px;right:15px;z-index:1000;padding:10px 15px;background:#e74c3c;color:white;border:none;border-radius:8px;cursor:pointer;font-family:'Comic Neue',Arial,Helvetica,sans-serif;font-weight:bold;box-shadow:0 4px 8px rgba(0,0,0,0.2)",n.onclick=()=>{e.innerHTML='<div style="text-align:center;padding:40px"><p style="font-size:18px;margin-bottom:20px">ÎŸ Ï‡Î¬ÏÏ„Î·Ï‚ Î­ÎºÎ»ÎµÎ¹ÏƒÎµ.</p><button onclick="initializeSmartMap()" style="padding:12px 25px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px">ğŸ—ºï¸ ÎÎ±Î½Î±Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Î§Î¬ÏÏ„Î·</button></div>'},e.appendChild(n)}
function calculateDistances(e){if(e.length<2)return'';let t='<div style="background:#e8f4f8;padding:15px;border-radius:10px;margin:15px 0;border:2px solid #4c7af0"><h4>ğŸ—ºï¸ Î‘Ï€Î¿ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ & ÎœÎµÏ„Î±ÎºÎ¹Î½Î®ÏƒÎµÎ¹Ï‚:</h4>';for(let n=0;n<e.length-1;n++){const o=e[n],a=e[n+1];if(o.lat&&o.lng&&a.lat&&a.lng){const i=calculateDistance(o.lat,o.lng,a.lat,a.lng);t+=`<div style="margin:10px 0;padding:10px;background:white;border-radius:8px"><strong>${o.name}</strong> â†’ <strong>${a.name}</strong><div style="font-size:0.9em;margin-top:5px">ğŸ“ Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ·: <strong>${i} km</strong><br>ğŸš¶ Î ÎµÏÏ€Î¬Ï„Î·Î¼Î±: ~${Math.round(i*15)} Î»ÎµÏ€Ï„Î¬<br>ğŸš— Î‘Ï…Ï„Î¿ÎºÎ¯Î½Î·Ï„Î¿: ~${Math.round(i*3)} Î»ÎµÏ€Ï„Î¬<br>ğŸš‡ ÎœÎœÎœ: ~${Math.round(i*5)} Î»ÎµÏ€Ï„Î¬</div><a href="https://www.google.com/maps/dir/${o.lat},${o.lng}/${a.lat},${a.lng}" target="_blank" style="color:#4c7af0;font-size:0.9em">ğŸ“± Google Maps</a></div>`}}return t+='</div>',t}
function calculateDistance(e,t,n,o){const a=6371,c=(n-e)*Math.PI/180,r=(o-t)*Math.PI/180,i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),s=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),d=a*s;return d.toFixed(1)}
function showRouteAndDirections(e,t,n){const o=e.getLatLng(),a=t.getLatLng();currentRoutePolyline&&n.removeLayer(currentRoutePolyline);const i=[o,a];currentRoutePolyline=L.polyline(i,{color:'#ff0000',weight:6,opacity:0.8,dashArray:'10, 10',lineCap:'round'}).addTo(n),n.fitBounds(L.latLngBounds(i),{padding:[100,100]}),createDirectionsPanel(o,a,calculateDirectDistance(o,a),n)}
function calculateDirectDistance(e,t){const n=6371,o=e.lat*Math.PI/180,a=t.lat*Math.PI/180,i=(t.lat-e.lat)*Math.PI/180,c=(t.lng-e.lng)*Math.PI/180,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return n*s}
function createDirectionsPanel(e,t,n,o){const a=document.getElementById('route-directions');a&&a.remove();const i=Math.round(n*15),c=Math.round(n*3),r=Math.round(n*5),s=Math.round(n*8),d=selectedMarkersForRoute.length>=2?selectedMarkersForRoute[0].activity.name||"Î£Î·Î¼ÎµÎ¯Î¿ Î‘":"Î£Î·Î¼ÎµÎ¯Î¿ Î‘",l=selectedMarkersForRoute.length>=2?selectedMarkersForRoute[1].activity.name||"Î£Î·Î¼ÎµÎ¯Î¿ Î’":"Î£Î·Î¼ÎµÎ¯Î¿ Î’",u=document.createElement('div');u.id='route-directions',u.style.cssText="position:absolute;top:80px;right:15px;background:white;padding:20px;border-radius:15px;box-shadow:0 5px 20px rgba(0,0,0,0.3);z-index:1000;max-width:380px;width:90%;border:3px solid #3eb489;font-family:'Comic Neue',Arial,sans-serif;animation:slideIn 0.3s ease-out;max-height:80vh;overflow-y:auto",u.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px"><h3 style="margin:0;color:#3eb489;font-size:1.4em">ğŸ—ºï¸ ÎŸÎ´Î·Î³Î¯ÎµÏ‚ ÎœÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ·Ï‚</h3><button onclick="closeDirectionsPanel()" style="background:#e74c3c;color:white;border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;font-size:16px;font-weight:bold">Ã—</button></div><div style="background:#f8f9fa;padding:15px;border-radius:10px;margin-bottom:15px"><div style="display:flex;align-items:center;margin-bottom:10px"><div style="width:20px;height:20px;background:#ff0000;border-radius:50%;margin-right:10px"></div><div><strong>${d}</strong></div></div><div style="text-align:center;margin:10px 0;color:#666;font-size:0.9em">â†“ ${n.toFixed(1)} km â†“</div><div style="display:flex;align-items:center"><div style="width:20px;height:20px;background:#00ff00;border-radius:50%;margin-right:10px"></div><div><strong>${l}</strong></div></div></div><div style="background:linear-gradient(135deg,#3eb489,#4c7af0);padding:15px;border-radius:10px;margin-bottom:20px;text-align:center;color:white"><div style="font-size:14px;margin-bottom:5px">ğŸ“ Î‘Î ÎŸÎ£Î¤Î‘Î£Î—</div><div style="font-size:32px;font-weight:bold;margin-bottom:5px">${n.toFixed(1)} km</div><div style="font-size:12px;opacity:0.9">${n<1?"ÎšÎ¿Î½Ï„Î¬! ğŸ¯":n<3?"ÎœÎ­Ï„ÏÎ¹Î± ğŸ‘Œ":"ÎœÎ±ÎºÏÎ¹Î¬ âš ï¸"}</div></div><div style="margin-bottom:20px"><h4 style="margin:0 0 12px 0;color:#2c3e50;font-size:1.1em">â±ï¸ Î•ÎºÏ„Î¹Î¼ÏÎ¼ÎµÎ½Î¿Ï‚ Î§ÏÏŒÎ½Î¿Ï‚</h4><div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px"><div style="padding:12px;background:#e8f5e9;border-radius:8px;text-align:center"><div style="font-size:24px">ğŸš¶</div><div style="font-size:16px;font-weight:bold;color:#2e7d32">${i} Î»ÎµÏ€Ï„Î¬</div><div style="font-size:11px;color:#666;margin-top:3px">Î ÎµÏÏ€Î¬Ï„Î·Î¼Î±</div></div><div style="padding:12px;background:#e3f2fd;border-radius:8px;text-align:center"><div style="font-size:24px">ğŸš—</div><div style="font-size:16px;font-weight:bold;color:#1565c0">${c} Î»ÎµÏ€Ï„Î¬</div><div style="font-size:11px;color:#666;margin-top:3px">Î‘Ï…Ï„Î¿ÎºÎ¯Î½Î·Ï„Î¿</div></div><div style="padding:12px;background:#fff3e0;border-radius:8px;text-align:center"><div style="font-size:24px">ğŸš‡</div><div style="font-size:16px;font-weight:bold;color:#f57c00">${r} Î»ÎµÏ€Ï„Î¬</div><div style="font-size:11px;color:#666;margin-top:3px">ÎœÎœÎœ</div></div><div style="padding:12px;background:#f3e5f5;border-radius:8px;text-align:center"><div style="font-size:24px">ğŸš²</div><div style="font-size:16px;font-weight:bold;color:#7b1fa2">${s} Î»ÎµÏ€Ï„Î¬</div><div style="font-size:11px;color:#666;margin-top:3px">Î Î¿Î´Î®Î»Î±Ï„Î¿</div></div></div></div><div style="background:#f8f9fa;padding:15px;border-radius:10px;margin-bottom:15px;text-align:center"><a href="https://www.google.com/maps/dir/${e.lat},${e.lng}/${t.lat},${t.lng}" target="_blank" style="display:block;padding:14px;background:#4c7af0;color:white;text-decoration:none;border-radius:8px;font-weight:bold;font-size:16px;transition:all 0.3s;border:2px solid #4c7af0"><span style="font-size:20px;margin-right:8px">ğŸ“±</span>Î†Î½Î¿Î¹Î³Î¼Î± Google Maps<span style="font-size:14px;margin-left:8px">â†—ï¸</span></a><p style="font-size:12px;color:#666;margin-top:8px;margin-bottom:0">Î˜Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹ ÏƒÎµ Î½Î­Î± ÎºÎ±ÏÏ„Î­Î»Î±</p></div><button onclick="clearRouteSelections()" style="width:100%;padding:14px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px;font-weight:bold">ğŸ—‘ï¸ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>`,o.getContainer().appendChild(u)}
function closeDirectionsPanel(){const e=document.getElementById('route-directions');e&&(e.style.animation='slideOut 0.2s ease-in',setTimeout((()=>e.remove()),200)),currentRoutePolyline&&window.currentMap&&(window.currentMap.removeLayer(currentRoutePolyline),currentRoutePolyline=null),window.customMarkers&&window.customMarkers.forEach(e=>{e.marker.setIcon(L.icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',iconSize:[25,41],iconAnchor:[12,41]}))}),window.selectedMarkersForRoute&&(window.selectedMarkersForRoute=[])}
function handleMarkerClick(e,t,n,o){const a=t.indexOf(e);if(a===-1){t.push(e),e.setIcon(L.icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',iconSize:[25,41],iconAnchor:[12,41]}))}else{t.splice(a,1);let o='green';selectedDestinationName.includes("Î’ÎµÏÎ¿Î»Î¯Î½Î¿")?o='blue':selectedDestinationName.includes("Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±")?o='red':selectedDestinationName.includes("Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·")?o='orange':o='green',e.setIcon(L.icon({iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${o}.png`,iconSize:[25,41],iconAnchor:[12,41]}))}if(t.length===2){window.selectedMarkersForRoute=t.map(e=>({marker:e,activity:null})),showRouteAndDirections(t[0],t[1],n)}else t.length>2?t.shift():window.polyline&&(n.removeLayer(window.polyline),window.polyline=null),document.getElementById('route-directions')&&document.getElementById('route-directions').remove()}
function isMobile(){return window.innerWidth<=640}
function checkMobileView(){const e=document.querySelector('.mobile-nav'),t=document.querySelector('.sidebar');isMobile()?(e&&(e.style.display='block'),t&&(t.style.display='none')):(e&&(e.style.display='none'),t&&(t.style.display='block'))}
window.addEventListener('resize',checkMobileView),window.addEventListener('load',checkMobileView);
function updateCityBackground(e){const t={"Î’Î¹Î­Î½Î½Î·":"https://images.unsplash.com/photo-1516550893923-42d28e5677af?w=1200","Î’ÎµÏÎ¿Î»Î¯Î½Î¿":"https://images.unsplash.com/photo-1587330979470-3595ac045ab0?w=1200","Î Î±ÏÎ¯ÏƒÎ¹":"https://images.unsplash.com/photo-1499856871958-5b9627545d1a?w=1200","Î¡ÏÎ¼Î·":"https://images.unsplash.com/photo-1552832230-c0197dd311b5?w=1200","Î›Î¿Î½Î´Î¯Î½Î¿":"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=1200","Î†Î¼ÏƒÏ„ÎµÏÎ½Ï„Î±Î¼":"https://images.unsplash.com/photo-1512470876302-972faa2aa9a4?w=1200","Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·":"https://images.unsplash.com/photo-1551867633-194f125bdbfa?w=1200&auto=format&fit=crop","Î ÏÎ¬Î³Î±":"https://images.unsplash.com/photo-1592906209472-a36b1f3782ef?w=1200","ÎœÏŒÎ½Î±Ï‡Î¿":"https://images.unsplash.com/photo-1595867818082-083862f3d630?w=1200","ÎšÎ¿Î»Ï‰Î½Î¯Î±":"https://images.unsplash.com/photo-1467269204594-9661b134dd2b?w=1200","Î’Î±ÏÎºÎµÎ»ÏÎ½Î·":"https://images.unsplash.com/photo-1583422409516-2895a77efded?w=1200","ÎœÎ±Î´ÏÎ¯Ï„Î·":"https://images.unsplash.com/photo-1539037116277-4db20889f2d4?w=1200","Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±":"https://images.unsplash.com/photo-1585208798174-6cedd86bd019a?w=1200&auto=format&fit=crop","Î”Î¿Ï…Î²Î»Î¯Î½Î¿":"https://images.unsplash.com/photo-1549918864-6bac32c52dcb?w=1200","Î•Î´Î¹Î¼Î²Î¿ÏÏÎ³Î¿":"https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=1200","Î–Ï…ÏÎ¯Ï‡Î·":"https://images.unsplash.com/photo-1544483048-8b74d33a11bd?w=1200","Î“ÎµÎ½ÎµÏÎ·":"https://images.unsplash.com/photo-1503919545889-aef636e10ad4?w=1200","ÎšÎ¿Ï€ÎµÎ³Ï‡Î¬Î³Î·":"https://images.unsplash.com/photo-1513622472932-bd5c45e1987b?w=1200","Î£Ï„Î¿ÎºÏ‡ÏŒÎ»Î¼Î·":"https://images.unsplash.com/photo-1506970843675-04a04c64ad6f?w=1200","Î’Î¿Ï…ÎºÎ¿Ï…ÏÎ­ÏƒÏ„Î¹":"https://images.unsplash.com/photo-1594736797933-d0f289d3f0b3?w=1200","ÎŒÏƒÎ»Î¿":"https://images.unsplash.com/photo-1583149454066-4c76b4d2ad23?w=1200","ÎœÎ¹Î»Î¬Î½Î¿":"https://images.unsplash.com/photo-1610018556010-6c6d89b95a0a?w=1200","Î¦Î»Ï‰ÏÎµÎ½Ï„Î¯Î±":"https://images.unsplash.com/photo-1543429259-5070ada7b72c?w=1200","ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¹Î½Î¿ÏÏ€Î¿Î»Î·":"https://images.unsplash.com/photo-1524231757912-21f4fe3a7200?w=1200","Î£ÏŒÏ†Î¹Î±":"https://images.unsplash.com/photo-1578351120013-6e2ada1d570d?w=1200","Î’Î±ÏÏƒÎ¿Î²Î¯Î±":"https://images.unsplash.com/photo-1590330237165-7c36d3d82b44?w=1200","ÎšÏÎ±ÎºÎ¿Î²Î¯Î±":"https://images.unsplash.com/photo-1544298628-3a4c18a4fb6b?w=1200"},n=t[e]||'https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?w=1200',o=new Image;o.src=n,o.onload=function(){document.body.style.backgroundImage=`linear-gradient(rgba(255,255,255,0.25),rgba(255,255,255,0.4)),url(${n})`}}
function resetFilters(){document.querySelectorAll('select').forEach(e=>e.value=''),document.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1),document.getElementById("travel-budget").value='',filterDestinations()}
function saveToLocalStorage(){const e={selectedDestinationName,selectedDaysStay,selectedBudget,selectedActivities:getSelectedActivities().map(e=>e.name),familyMembers};localStorage.setItem('travelPlannerData',JSON.stringify(e))}
function loadFromLocalStorage(){const e=localStorage.getItem('travelPlannerData');if(e){const t=JSON.parse(e);if(confirm('ğŸ“‹ Î’ÏÎ­Î¸Î·ÎºÎµ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ ÏƒÏ‡Î­Î´Î¹Î¿! Î˜Î­Î»ÎµÏ„Îµ Î½Î± ÏƒÏ…Î½ÎµÏ‡Î¯ÏƒÎµÏ„Îµ;')){selectedDestinationName=t.selectedDestinationName||"",selectedDaysStay=t.selectedDaysStay||0,selectedBudget=t.selectedBudget||0,selectedDaysStay>0&&(document.getElementById("days-stay").value=selectedDaysStay),selectedBudget>0&&(document.getElementById("travel-budget").value=selectedBudget),t.familyMembers&&t.familyMembers.length>0&&(familyMembers=t.familyMembers,updateFamilyMembersUI()),t.selectedActivities&&t.selectedActivities.length>0&&(window.savedActivities=t.selectedActivities),setTimeout((()=>alert(`âœ… Î¦Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿:\nğŸ™ï¸ ${selectedDestinationName||'ÎšÎ±Î½Î­Î½Î±Ï‚'}\nğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ${familyMembers.length} ÎœÎ­Î»Î·\nğŸ“… ${selectedDaysStay} ÎœÎ­ÏÎµÏ‚\nğŸ’° ${selectedBudget}â‚¬`)),500)}else localStorage.removeItem('travelPlannerData')}}
function updateFamilyMembersUI(){const e=document.getElementById('family-members-list');e.innerHTML='',familyMembers.forEach(((t,n)=>{const o=n===0?'ğŸ‘¨':n===1?'ğŸ‘©':'ğŸ§’',a=document.createElement('div');a.className='family-member-input',a.innerHTML=`<span>${o}</span><input type="text" placeholder="ÎŒÎ½Î¿Î¼Î±" value="${t.name}" class="member-name"><input type="number" placeholder="Î—Î»Î¹ÎºÎ¯Î±" value="${t.age}" class="member-age" min="0" max="120"><span>ÎµÏ„ÏÎ½</span>${n>=2?'<button onclick="removeFamilyMember(this)" class="remove-member-btn">Ã—</button>':''}`,e.appendChild(a)}))}
document.getElementById("days-stay").addEventListener("change",(function(){selectedDaysStay=this.value?parseInt(this.value):0,saveToLocalStorage(),updateStep1Display(),document.getElementById('step-summary').classList.contains('active')&&setTimeout((()=>goToStep5()),100)}))
function updateDaysStay(){const e=document.getElementById("days-stay");selectedDaysStay=e.value?parseInt(e.value):0,saveToLocalStorage(),updateStep1Display(),document.getElementById('step-summary').classList.contains('active')&&goToStep5();const t=document.createElement('div');t.textContent=`âœ… Î•Î½Î·Î¼ÎµÏÏÎ¸Î·ÎºÎ±Î½: ${selectedDaysStay}`,t.style.cssText='position:fixed;top:20px;right:20px;background:#3eb489;color:white;padding:10px;border-radius:8px;z-index:10000;',document.body.appendChild(t),setTimeout((()=>t.remove()),3e3)}
function clearAllData(){confirm('âš ï¸ Î˜Î­Î»ÎµÏ„Îµ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ ÎŸÎ›Î‘ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±;')&&(localStorage.removeItem('travelPlannerData'),familyMembers=[{name:"Î Î±Ï„Î­ÏÎ±Ï‚",age:42},{name:"ÎœÎ·Ï„Î­ÏÎ±",age:40}],updateFamilyMembersUI(),location.reload())}
function updateStep1Display(){document.getElementById('destination-cards').innerHTML=`<div style="text-align:center;padding:20px;background:#d4edda;border-radius:12px;border:2px solid #3eb489"><h3>âœ… Î•Ï€Î¹Î»Î­Î¾Î±Ï„Îµ: ${selectedDestinationName}</h3><p>ğŸ“… Î”Î¹Î¬ÏÎºÎµÎ¹Î±: ${selectedDaysStay>0?selectedDaysStay+' Î¼Î­ÏÎµÏ‚':'Î¼Î· Î¿ÏÎ¹ÏƒÎ¼Î­Î½ÎµÏ‚'}</p><p>ğŸ’° Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚: ${selectedBudget>0?selectedBudget+'â‚¬':'Î”ÎµÎ½ Î¿ÏÎ¯ÏƒÏ„Î·ÎºÎµ'}</p><p>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ÎœÎ­Î»Î·: ${familyMembers.length}</p><button onclick="goToStep2()" style="padding:10px 20px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;margin-top:10px">Î£Ï…Î½Î­Ï‡ÎµÎ¹Î± ÏƒÏ„Î¿ Î’Î®Î¼Î± 2</button></div>`}
window.addEventListener('load',(function(){setTimeout((()=>{loadFromLocalStorage(),checkMobileView()}),100)})),document.getElementById("travel-budget").addEventListener("input",(function(){selectedBudget=this.value?parseInt(this.value):0,saveToLocalStorage()})),document.addEventListener('input',(function(e){e.target.classList.contains('member-name')||e.target.classList.contains('member-age')})),updateSelectedActivities=function(e){return e},categorizeFamilyMembers=function(){const e={"0-2":0,"3-5":0,"6-14":0,"15-19":0,"18+":0};return familyMembers.forEach(t=>{t.age<=2?e["0-2"]++:t.age<=5?e["3-5"]++:t.age<=14?e["6-14"]++:t.age<=19?e["15-19"]++:e["18+"]++}),e},calculateComboRegularCost=function(e,t){let n=0;return e.forEach((e=>{let o=0;Object.keys(t).forEach(n=>{const a=t[n];if(a>0){let t=0;e.prices&&(n==="0-2"&&e.prices["0-2"]!==undefined?t=e.prices["0-2"]:n==="3-5"&&e.prices["3-5"]!==undefined?t=e.prices["3-5"]:n==="6-14"&&e.prices["6-14"]!==undefined?t=e.prices["6-14"]:n==="15-19"&&e.prices["15-19"]!==undefined?t=e.prices["15-19"]:n==="18+"&&e.prices["18+"]!==undefined?t=e.prices["18+"]:e.prices.adult!==undefined&&(t=e.prices.adult)),o+=t*a}}),n+=o})),n},findLondonCombos=function(e,t){return[]},findViennaCombos=function(e,t){return[]},findBerlinCombos=function(e,t){return[]},findGenericCombos=function(e,t){return[]}
function displayComboResults(e,t){closeComboModal();const n=document.createElement('div');n.id='combo-modal-main',n.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;display:flex;justify-content:center;align-items:center;font-family:'Comic Neue',Arial,sans-serif";const o=document.createElement('div');o.style.cssText="background:white;padding:30px;border-radius:20px;max-width:900px;max-height:85vh;overflow-y:auto;box-shadow:0 10px 30px rgba(0,0,0,0.3)";let a=t;e.bestCombo&&e.bestSaving>0&&(a=t-e.bestSaving);let i=`<div style="text-align:center"><h2 style="color:#9c27b0;margin-top:0">ğŸ’° ÎˆÎ¾Ï…Ï€Î½Î¿Ï‚ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Combos</h2><div style="background:#f3e5f5;padding:15px;border-radius:10px;margin-bottom:20px"><h3 style="color:#7b1fa2">ğŸ“Š ÎšÏŒÏƒÏ„Î¿Ï‚ Î§Î©Î¡Î™Î£ Combos: <strong>${t.toFixed(2)} â‚¬</strong></h3><p style="color:#666">ğŸ™ï¸ ${selectedDestinationName} | ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ${familyMembers.length} ÎœÎ­Î»Î·</p></div>`;e.allCombos.length>0?e.bestSaving>0&&e.bestCombo&&(i+=`<div style="background:#e8f5e8;padding:20px;border-radius:12px;border:3px solid #4caf50;margin-bottom:20px"><h3 style="color:#2e7d32">ğŸ† ÎšÎ‘Î›Î¥Î¤Î•Î¡Î— Î•Î Î™Î›ÎŸÎ“Î—</h3><h4>${e.bestCombo.name}</h4><p>${e.bestCombo.description}</p><div style="background:#fff;padding:15px;border-radius:8px;margin:15px 0"><h4 style="color:#1565c0;margin-top:0">ğŸ§® Î‘ÎÎ‘Î›Î¥Î¤Î™ÎšÎ‘:</h4><table style="width:100%;border-collapse:collapse"><tr><td style="padding:8px;border-bottom:1px solid #eee">Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎºÏŒÏƒÏ„Î¿Ï‚</td><td style="padding:8px;border-bottom:1px solid #eee;text-align:right">${t.toFixed(2)} â‚¬</td></tr><tr><td style="padding:8px;border-bottom:1px solid #eee">ÎšÏŒÏƒÏ„Î¿Ï‚ ${e.bestCombo.activities.length} Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹Î¿Ï„Î®Ï„Ï‰Î½</td><td style="padding:8px;border-bottom:1px solid #eee;text-align:right">${e.bestCombo.regularPrice.toFixed(2)} â‚¬</td></tr><tr><td style="padding:8px;border-bottom:1px solid #eee">Combo Ï„Î¹Î¼Î®</td><td style="padding:8px;border-bottom:1px solid #eee;text-align:right;color:#4caf50;font-weight:bold">${e.bestCombo.comboPrice.toFixed(2)} â‚¬</td></tr><tr style="background:#f9f9f9"><td style="padding:8px"><strong>Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·</strong></td><td style="padding:8px;text-align:right;color:#4caf50;font-weight:bold">-${e.bestSaving.toFixed(2)} â‚¬</td></tr></table></div><div style="display:flex;justify-content:space-around;margin:20px 0;align-items:center"><div style="text-align:center"><div style="font-size:24px;color:#f44336;text-decoration:line-through">${t.toFixed(2)}â‚¬</div><small>Î§Ï‰ÏÎ¯Ï‚ combo</small></div><div style="font-size:30px;color:#666">â†’</div><div style="text-align:center"><div style="font-size:28px;color:#4caf50;font-weight:bold">${a.toFixed(2)}â‚¬</div><small>ÎœÎµ combo</small></div></div><div style="background:#4caf50;color:white;padding:12px;border-radius:8px;font-size:22px;font-weight:bold;margin-top:10px">ğŸ’° Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·: ${e.bestSaving.toFixed(2)} â‚¬</div></div>`,i+=`<h3 style="color:#3f51b5">ğŸ¯ ÎŒÎ»Î± Ï„Î± Combos:</h3>`,e.allCombos.forEach((t,n)=>{const o=t.regularPrice-t.comboPrice,c=a-o,r=o>0?'#4caf50':'#ff9800',s=o>0?'#f1f8e9':'#fff3e0';i+=`<div style="background:${s};padding:15px;border-radius:10px;border-left:5px solid ${r};margin-bottom:15px"><h4 style="margin-top:0;color:#3f51b5">${t.name}</h4><p style="margin:5px 0">${t.description}</p><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0"><div style="text-align:center;padding:8px;background:white;border-radius:6px"><div style="font-size:0.9em;color:#666">ÎšÎ±Î½Î¿Î½Î¹ÎºÏŒ</div><div style="font-size:18px;color:#f44336;text-decoration:line-through">${t.regularPrice.toFixed(2)}â‚¬</div></div><div style="text-align:center;padding:8px;background:white;border-radius:6px"><div style="font-size:0.9em;color:#666">Combo</div><div style="font-size:18px;color:#4caf50;font-weight:bold">${t.comboPrice.toFixed(2)}â‚¬</div></div></div><div style="background:${o>0?'#e8f5e9':'#ffebee'};padding:8px;border-radius:6px;margin:8px 0"><div style="display:flex;justify-content:space-between"><span><strong>Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·:</strong></span><span style="color:${o>0?'#4caf50':'#f44336'};font-weight:bold">${o>0?'ğŸ’° ':'âš ï¸ '}${o.toFixed(2)}â‚¬</span></div><div style="display:flex;justify-content:space-between;font-size:0.9em"><span>ÎÎ­Î¿ ÏƒÏÎ½Î¿Î»Î¿:</span><span><strong>${c.toFixed(2)}â‚¬</strong></span></div></div></div>`})):i+=`<div style="background:#fff3cd;padding:20px;border-radius:10px;border:2px solid #ffc107"><h3 style="color:#856404">â„¹ï¸ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ combos</h3></div>`,i+=`<div style="margin-top:20px;padding-top:20px;border-top:2px dashed #ccc"><h4 style="color:#9c27b0">ğŸ“Š Î¤Î•Î›Î™ÎšÎ— Î£Î¥ÎÎŸÎ¨Î—:</h4><div style="background:#e3f2fd;padding:15px;border-radius:10px"><ul style="margin:0;padding-left:20px"><li>ğŸ’° <strong>ÎšÎ±Î½Î¿Î½Î¹ÎºÏŒ:</strong> ${t.toFixed(2)} â‚¬</li>${e.bestCombo?`<li>ğŸ† <strong>ÎœÎµ combo:</strong> ${a.toFixed(2)} â‚¬</li><li>âœ… <strong>Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·:</strong> ${e.bestSaving.toFixed(2)} â‚¬</li>`:'<li>â„¹ï¸ <strong>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ ÎµÎ¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·</strong></li>'}<li>ğŸ¯ <strong>Î’ÏÎ­Î¸Î·ÎºÎ±Î½:</strong> ${e.allCombos.length} combos</li></ul></div></div><div style="margin-top:25px;display:flex;justify-content:center;gap:15px"><button onclick="closeComboModal()" style="padding:12px 25px;background:#3eb489;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px">ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿</button>${e.bestCombo?`<button onclick="applyComboToTotal('${e.bestCombo.name}',${e.bestSaving})" style="padding:12px 25px;background:#9c27b0;color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px;font-weight:bold">âœ… Î•Ï†Î±ÏÎ¼Î¿Î³Î®</button>`:''}</div>`,o.innerHTML=i,n.appendChild(o);const c=document.createElement('button');c.innerHTML='Ã—',c.style.cssText="position:absolute;top:20px;right:20px;background:#f44336;color:white;border:none;border-radius:50%;width:40px;height:40px;font-size:24px;cursor:pointer;z-index:10001",c.onclick=()=>{n.remove(),c.remove()},document.body.appendChild(n),document.body.appendChild(c)}
function applyBestCombo(){alert("â„¹ï¸ Î— Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚ Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ Ï…Ï€ÏŒ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·."),closeComboModal()}
function closeComboModal(){const e=document.getElementById('combo-modal-main');e&&e.remove();const t=document.querySelector('button[style*="position: absolute"][style*="top: 20px"]');t&&t.remove()}
function applyBestCombo(){alert("â„¹ï¸ Î— Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚ Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ Ï…Ï€ÏŒ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·."),closeComboModal()}
let customPoints=JSON.parse(localStorage.getItem('travel_custom_points'))||[];
function startAddingCustomPoint(){if(typeof L=="undefined"||!window.currentMap)return alert('âš ï¸ Î ÏÎ­Ï€ÎµÎ¹ Ï€ÏÏÏ„Î± Î½Î± Ï†Î¿ÏÏ„ÏÏƒÎµÏ„Îµ Ï„Î¿Î½ Ï‡Î¬ÏÏ„Î·!'),initializeSmartMap(),setTimeout((()=>alert('âœ… ÎŸ Ï‡Î¬ÏÏ„Î·Ï‚ Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ!')),1e3),void 0;const e=window.currentMap;alert('ğŸ—ºï¸ ÎšÎ¬Î½Ï„Îµ ÎºÎ»Î¹Îº ÏƒÏ„Î¿Î½ Ï‡Î¬ÏÏ„Î· Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ ÏƒÎ·Î¼ÎµÎ¯Î¿!'),e.getContainer().style.cursor='crosshair';const t=function(t){e.off('click',t),e.getContainer().style.cursor='',showCustomPointForm(t.latlng.lat,t.latlng.lng)};e.on('click',t);const n=document.createElement('button');n.textContent='âœ–ï¸ Î‘ÎºÏÏÏ‰ÏƒÎ·',n.style.cssText="position:absolute;top:80px;right:15px;z-index:1000;padding:10px 15px;background:#e74c3c;color:white;border:none;border-radius:8px;cursor:pointer;font-family:'Comic Neue',Arial,Helvetica,sans-serif;font-weight:bold",n.onclick=function(){e.off('click',t),e.getContainer().style.cursor='',n.remove()},document.getElementById('map-container').appendChild(n)}
function showCustomPointForm(e,t,n=""){const o=document.getElementById('custom-point-modal');o&&o.remove();const a=document.createElement('div');a.id='custom-point-modal',a.style.cssText="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:25px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.3);z-index:10000;max-width:450px;width:90%",a.innerHTML=`<h3 style="margin-top:0;color:#9c27b0">ğŸ† Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎÎ­Î¿Ï… Î£Î·Î¼ÎµÎ¯Î¿Ï…</h3><div style="background:#f0f0f0;padding:10px;border-radius:8px;margin-bottom:15px;font-size:0.9em">ğŸ“ ${parseFloat(e).toFixed(6)}, ${parseFloat(t).toFixed(6)}</div><label style="display:block;margin:10px 0 5px 0">ğŸ·ï¸ ÎŒÎ½Î¿Î¼Î±:</label><input type="text" id="custom-point-name" value="${n?n.split(',')[0]:''}" placeholder="Ï€.Ï‡. Î¤Î¿ Î¾ÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿ Î¼Î±Ï‚" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:10px"><label style="display:block;margin:10px 0 5px 0">ğŸ“ Î¤ÏÏ€Î¿Ï‚:</label><select id="custom-point-type" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:15px"><option value="attraction">ğŸ›ï¸ Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î¿</option><option value="hotel" selected>ğŸ¨ ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿</option><option value="restaurant">ğŸ½ï¸ Î•ÏƒÏ„Î¹Î±Ï„ÏŒÏÎ¹Î¿</option><option value="cafe">â˜• ÎšÎ±Ï†Î­</option><option value="shop">ğŸ›ï¸ ÎšÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±</option><option value="transport">ğŸš‡ Î£Ï„Î±Î¸Î¼ÏŒÏ‚</option><option value="personal">ğŸ  Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒ</option><option value="other">ğŸ“ Î†Î»Î»Î¿</option></select><label style="display:block;margin:10px 0 5px 0">ğŸ“ Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·:</label><textarea id="custom-point-note" placeholder="Ï€.Ï‡. Î¤Î¿ Î¾ÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿ ÏŒÏ€Î¿Ï… Î¸Î± Î¼ÎµÎ¯Î½Î¿Ï…Î¼Îµ..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:15px;height:80px"></textarea><div style="text-align:center"><button onclick="saveCustomPoint(${e},${t})" style="padding:12px 25px;background:#9c27b0;color:white;border:none;border-radius:8px;cursor:pointer;margin:5px;font-size:16px">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button><button onclick="closeCustomPointForm()" style="padding:12px 25px;background:#6c757d;color:white;border:none;border-radius:8px;cursor:pointer;margin:5px;font-size:16px">âŒ Î‘ÎºÏÏÏ‰ÏƒÎ·</button></div>`,document.body.appendChild(a)}
function saveCustomPoint(e,t){const n=document.getElementById('custom-point-name').value,o=document.getElementById('custom-point-type').value,a=document.getElementById('custom-point-note').value;if(!n.trim())return alert('âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÏŒÎ½Î¿Î¼Î±!');const i={id:Date.now(),name:n.trim(),type:o,lat:e,lng:t,note:a.trim(),date:new Date().toLocaleDateString('el-GR')};customPoints.push(i),localStorage.setItem('travel_custom_points',JSON.stringify(customPoints)),addCustomPointToMap(i),closeCustomPointForm(),alert(`âœ… Î¤Î¿ ÏƒÎ·Î¼ÎµÎ¯Î¿ "${n}" Ï€ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ!`)}
function closeCustomPointForm(){const e=document.getElementById('custom-point-modal');e&&e.remove()}
function addCustomPointToMap(e){if(typeof L=="undefined"||!window.currentMap)return;const t=window.currentMap,n={attraction:'violet',restaurant:'red',cafe:'orange',shop:'blue',personal:'green',other:'gray'},o=n[e.type]||'gray',a=L.icon({iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${o}.png`,iconSize:[25,41],iconAnchor:[12,41]}),i=L.marker([e.lat,e.lng],{icon:a}).addTo(t);const c={attraction:'ğŸ›ï¸ Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î¿',restaurant:'ğŸ½ï¸ Î•ÏƒÏ„Î¹Î±Ï„ÏŒÏÎ¹Î¿',cafe:'â˜• ÎšÎ±Ï†Î­',shop:'ğŸ›ï¸ ÎšÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±',personal:'ğŸ  Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒ Î£Î·Î¼ÎµÎ¯Î¿',other:'ğŸ“ Î†Î»Î»Î¿'};i.bindPopup(`<div style="max-width:250px"><h4 style="margin:0 0 8px 0;color:#9c27b0">${e.name}</h4><p style="margin:0 0 5px 0"><strong>${c[e.type]||'ğŸ“ Î£Î·Î¼ÎµÎ¯Î¿'}</strong></p>${e.note?`<p style="margin:5px 0;font-size:0.9em">ğŸ“ ${e.note}</p>`:''}<p style="margin:5px 0;font-size:0.85em;color:#666">Î ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ: ${e.date}</p><button onclick="deleteCustomPoint(${e.id},this)" style="padding:5px 10px;background:#e74c3c;color:white;border:none;border-radius:4px;cursor:pointer;font-size:0.8em">ğŸ—‘ï¸ Î”Î¹Î±Î³ÏÎ±Ï†Î®</button></div>`),window.customMarkers||(window.customMarkers=[]),window.customMarkers.push({id:e.id,marker:i})}
function deleteCustomPoint(e,t){if(!confirm('âš ï¸ Î˜Î­Î»ÎµÏ„Îµ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ ÏƒÎ·Î¼ÎµÎ¯Î¿;'))return;if(window.customMarkers){const t=window.customMarkers.findIndex(n=>n.id===e);t!==-1&&(window.currentMap.removeLayer(window.customMarkers[t].marker),window.customMarkers.splice(t,1))}customPoints=customPoints.filter(t=>t.id!==e),localStorage.setItem('travel_custom_points',JSON.stringify(customPoints)),viewCustomPoints(),alert('âœ… Î¤Î¿ ÏƒÎ·Î¼ÎµÎ¯Î¿ Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ!')}
function viewCustomPoints(){const e=document.getElementById('custom-points-container'),t=document.getElementById('custom-points-list');if(customPoints.length===0)e.innerHTML='<div style="text-align:center;padding:20px;background:#f8f9fa;border-radius:10px"><p>ğŸ“­ Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÎ¹ ÏƒÎ·Î¼ÎµÎ¯Î±.</p></div>';else{let n='<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px">';customPoints.forEach(e=>{const t={attraction:'ğŸ›ï¸ Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î¿',restaurant:'ğŸ½ï¸ Î•ÏƒÏ„Î¹Î±Ï„ÏŒÏÎ¹Î¿',cafe:'â˜• ÎšÎ±Ï†Î­',shop:'ğŸ›ï¸ ÎšÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±',personal:'ğŸ  Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒ Î£Î·Î¼ÎµÎ¯Î¿',other:'ğŸ“ Î†Î»Î»Î¿'};n+=`<div style="background:white;padding:15px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);border-left:4px solid #9c27b0"><h4 style="margin:0 0 8px 0">${e.name}</h4><p style="margin:0 0 5px 0;color:#666">${t[e.type]||'ğŸ“ Î£Î·Î¼ÎµÎ¯Î¿'}</p>${e.note?`<p style="margin:0 0 5px 0;font-size:0.9em">ğŸ“ ${e.note}</p>`:''}<p style="margin:0 0 8px 0;font-size:0.85em;color:#999">ğŸŒ ${e.lat.toFixed(4)}, ${e.lng.toFixed(4)}</p><div style="display:flex;gap:10px"><button onclick="focusOnPoint(${e.lat},${e.lng})" style="padding:6px 12px;background:#3eb489;color:white;border:none;border-radius:4px;cursor:pointer;font-size:0.85em">ğŸ—ºï¸ Î”ÎµÎ¯Î¾Îµ</button><button onclick="deleteCustomPoint(${e.id})" style="padding:6px 12px;background:#e74c3c;color:white;border:none;border-radius:4px;cursor:pointer;font-size:0.85em">ğŸ—‘ï¸ Î”Î¹Î±Î³ÏÎ±Ï†Î®</button></div></div>`}),n+='</div>',e.innerHTML=n}t.style.display='block'}
function focusOnPoint(e,t){if(typeof L=="undefined"||!window.currentMap)return alert('âš ï¸ Î ÏÎ­Ï€ÎµÎ¹ Ï€ÏÏÏ„Î± Î½Î± Ï†Î¿ÏÏ„ÏÏƒÎµÏ„Îµ Ï„Î¿Î½ Ï‡Î¬ÏÏ„Î·!');window.currentMap.setView([e,t],16),window.customMarkers&&window.customMarkers.find(n=>Math.abs(n.marker.getLatLng().lat-e)<.001&&Math.abs(n.marker.getLatLng().lng-t)<.001)?.marker.openPopup()}
function loadCustomPointsOnMap(){if(typeof L=="undefined"||!window.currentMap)return;window.customMarkers&&(window.customMarkers.forEach(e=>window.currentMap.removeLayer(e.marker)),window.customMarkers=[]),customPoints.forEach(e=>{addCustomPointToMap(e)})}
function addCustomPointSmart(){if(typeof L=="undefined"||!window.currentMap)return alert('âš ï¸ Î ÏÎ­Ï€ÎµÎ¹ Ï€ÏÏÏ„Î± Î½Î± Ï†Î¿ÏÏ„ÏÏƒÎµÏ„Îµ Ï„Î¿Î½ Ï‡Î¬ÏÏ„Î·!'),initializeSmartMap(),setTimeout((()=>alert('âœ… ÎŸ Ï‡Î¬ÏÏ„Î·Ï‚ Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ!')),1500),void 0;const e=prompt(`ğŸ† Î Î©Î£ Î˜Î•Î›Î•Î¤Î• ÎÎ‘ Î Î¡ÎŸÎ£Î˜Î•Î£Î•Î¤Î• Î¤ÎŸ Î£Î—ÎœÎ•Î™ÎŸ;\n\n1ï¸âƒ£ ğŸ” Î‘ÎÎ‘Î–Î—Î¤Î—Î£Î— ÎŸÎÎŸÎœÎ‘Î¤ÎŸÎ£\n2ï¸âƒ£ ğŸ—ºï¸ ÎšÎ›Î™Îš Î£Î¤ÎŸÎ Î§Î‘Î¡Î¤Î—\n3ï¸âƒ£ ğŸ“« Î Î›Î—ÎšÎ¤Î¡ÎŸÎ›ÎŸÎ“Î—Î£Î— Î”Î™Î•Î¥Î˜Î¥ÎÎ£Î—Î£\n\nÎ•Ï€Î¹Î»Î­Î¾Ï„Îµ 1, 2 Î® 3:`);if('1'===e)searchPointByName();else if('2'===e)startAddingCustomPoint();else if('3'===e)searchPointByAddress();else alert('âŒ Î‘ÎºÏ…ÏÏÎ¸Î·ÎºÎµ')}
function searchPointByName(){const e=prompt('ğŸ” Î“ÏÎ¬ÏˆÏ„Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î·Ï‚ Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±Ï‚:');if(!e||e.trim()==='')return alert('âŒ Î”ÎµÎ½ ÎµÎ¹ÏƒÎ¬Î³Î±Ï„Îµ ÏŒÎ½Î¿Î¼Î±');alert('ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·...');fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=5`).then(e=>e.json()).then(t=>{if(t&&t.length>0)if(t.length>1){let n='ğŸ“‹ Î’ÏÎ­Î¸Î·ÎºÎ±Î½ Ï€Î¿Î»Î»Î­Ï‚ Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯ÎµÏ‚:\n\n';t.slice(0,5).forEach((e,t)=>{n+=`${t+1}. ${e.display_name}\n`}),n+='\nÎ•Ï€Î¹Î»Î­Î¾Ï„Îµ Î±ÏÎ¹Î¸Î¼ÏŒ (1-5) Î® 0 Î³Î¹Î± Î±ÎºÏÏÏ‰ÏƒÎ·:';const o=prompt(n),a=parseInt(o);a>=1&&a<=t.length&&(const e=t[a-1];showCustomPointForm(e.lat,e.lon,`${e.display_name}`))}else{const n=t[0];showCustomPointForm(n.lat,n.lon,`${n.display_name}`)}else alert('âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±.'),startAddingCustomPoint()}).catch((()=>{alert('âš ï¸ Î ÏÎ¿ÏƒÏ‰ÏÎ¹Î½ÏŒ ÏƒÏ†Î¬Î»Î¼Î±.'),startAddingCustomPoint()}))}
function searchPointByAddress(){const e=prompt('ğŸ“« Î’Î¬Î»Ï„Îµ Ï€Î»Î®ÏÎ· Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·:');if(!e||e.trim()==='')return alert('âŒ Î”ÎµÎ½ ÎµÎ¹ÏƒÎ¬Î³Î±Ï„Îµ Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·');alert('ğŸ“¡ Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·...'),fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&addressdetails=1`).then(e=>e.json()).then(t=>{t&&t.length>0?showCustomPointForm(t[0].lat,t[0].lon,`${t[0].display_name}`):(alert('âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Î· Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·.'),startAddingCustomPoint())}).catch((()=>{alert('âš ï¸ Î ÏÎ¿ÏƒÏ‰ÏÎ¹Î½ÏŒ ÏƒÏ†Î¬Î»Î¼Î±.'),startAddingCustomPoint()}))}
const EXTRA_CITIES_CONFIG={"ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¹Î½Î¿ÏÏ€Î¿Î»Î·":{file:"istanbul.json",enabled:!0,emoji:"ğŸ•Œ"},"Î Î±ÏÎ¯ÏƒÎ¹":{file:"paris.json",enabled:!0,emoji:"ğŸ—¼"},"Î ÏÎ¬Î³Î±":{file:"prague.json",enabled:!0,emoji:"ğŸ°"},"Î¡ÏÎ¼Î·":{file:"data/rome.json",enabled:!0,emoji:"ğŸ•"}};window.TravelPlannerExtensions={checkAndLoadExtraCity:async function(e){console.log(`ğŸ” ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚: ${e}`);const t=EXTRA_CITIES_CONFIG[e];if(!t||!t.enabled)return null;try{const n=await fetch(t.file);if(!n.ok)return null;const o=await n.json();return console.log(`âœ… Î¦Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ: ${e}`),o}catch(e){return console.error(`âŒ Î£Ï†Î¬Î»Î¼Î±:`,e),null}}}
'undefined'!=typeof navigator&&'serviceWorker'in navigator&&window.addEventListener('load',(function(){navigator.serviceWorker.register('sw.js').then((function(e){console.log('âœ… Service Worker: ',e.scope)}),(function(e){console.log('âŒ Service Worker failed: ',e)}))}))
function convertAnyPriceFormatToPerAge(e){const t={};if(e["0"]!==undefined||e.adult!==undefined)return e;if(e["0-2"]!==undefined)for(let n=0;n<=2;n++)t[n]=e["0-2"];if(e["3-5"]!==undefined)for(let n=3;n<=5;n++)t[n]=e["3-5"];if(e["6-14"]!==undefined)for(let n=6;n<=14;n++)t[n]=e["6-14"];if(e["15-19"]!==undefined){for(let n=15;n<=17;n++)t[n]=e["15-19"];e["18+"]!==undefined?(t[18]=e["18+"],t[19]=e["18+"]):(t[18]=e["15-19"],t[19]=e["15-19"])}if(e["18+"]!==undefined&&(t.adult=e["18+"]),e["0-6"]!==undefined)for(let n=0;n<=6;n++)t[n]===undefined&&(t[n]=e["0-6"]);if(e["7-12"]!==undefined)for(let n=7;n<=12;n++)t[n]===undefined&&(t[n]=e["7-12"]);if(e["13-17"]!==undefined)for(let n=13;n<=17;n++)t[n]===undefined&&(t[n]=e["13-17"]);return!t.adult&&e["18+"]&&(t.adult=e["18+"]),t}
async function loadCityActivities(e){try{const t={Î’Î¹Î­Î½Î½Î·:'vienna.json',Î›Î¿Î½Î´Î¯Î½Î¿:'london.json',ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¹Î½Î¿ÏÏ€Î¿Î»Î·:'istanbul.json',Î Î±ÏÎ¯ÏƒÎ¹:'paris.json',Î ÏÎ¬Î³Î±:'prague.json',Î’ÎµÏÎ¿Î»Î¯Î½Î¿:'berlin.json',Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±:'lisbon.json',Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·:'budapest.json',ÎœÎ±Î´ÏÎ¯Ï„Î·:'madrid.json'}[e];if(!t)return null;const n=await fetch(t);if(!n.ok)throw new Error;const o=await n.json();return{name:o.city,country:o.country,currency:o.currency,emoji:o.emoji,description:o.description,location:o.location,activities:o.activities}}catch(e){return null}}
function createActivityCardsNew(e){const t=document.getElementById('activities-container');t.innerHTML="";function n(e,t,n){if(!e)return 0;for(let o=t;o<=n;o++)if(e[o]!==undefined)return e[o];return e&&e.adult||0}e.forEach(((o,a)=>{const i=document.createElement('div');i.className="activity-card",o.selected===!0&&i.classList.add('selected'),i.id=`activity-${a}`,i.innerHTML=`<span class="star">â­</span><div class="activity-info"><h3>${o.name}</h3><p>${o.desc||o.description||''}</p><div style="margin-top:15px"><table class="activity-table"><tr><th style="padding:4px;background:#f0f8ff">0-5</th><th style="padding:4px;background:#f0f8ff">6-14</th><th style="padding:4px;background:#f0f8ff">15-17</th><th style="padding:4px;background:#f0f8ff">18+</th></tr><tr><td style="padding:4px;border:1px solid #ddd">${n(o.prices,0,5)}â‚¬</td><td style="padding:4px;border:1px solid #ddd">${n(o.prices,6,14)}â‚¬</td><td style="padding:4px;border:1px solid #ddd">${n(o.prices,15,17)}â‚¬</td><td style="padding:4px;border:1px solid #ddd">${o.prices&&o.prices.adult||0}â‚¬</td></tr></table></div><div class="total" id="total-${a}">ÎšÏŒÏƒÏ„Î¿Ï‚: 0 â‚¬</div></div>`,i.addEventListener('click',(()=>{i.classList.toggle('selected'),o.selected===undefined&&(o.selected=!1),o.selected=!o.selected,window.currentCityActivities&&window.currentCityActivities[a]&&(window.currentCityActivities[a].selected=o.selected),calculateAllCostsNew(),saveToLocalStorage()})),t.appendChild(i)}))}
function calculateAllCostsNew(){if(!window.currentCityActivities)return;if(0===familyMembers.length)return alert("âš ï¸ Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Î¿ÏÎ¯ÏƒÎµÎ¹ Î¼Î­Î»Î· Î¿Î¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î±Ï‚!");let e=0;window.currentCityActivities.forEach(((t,n)=>{const o=document.getElementById(`activity-${n}`);if(!o)return;const a=o.classList.contains('selected'),i=document.getElementById(`total-${n}`);if(a&&i){let o=0;familyMembers.forEach(e=>{const n=e.age;let a=0;t.prices&&t.prices[n]!==undefined?a=t.prices[n]:n<=2&&t.prices["0-2"]!==undefined?a=t.prices["0-2"]:n<=5&&t.prices["3-5"]!==undefined?a=t.prices["3-5"]:n<=14&&t.prices["6-14"]!==undefined?a=t.prices["6-14"]:n<=19&&t.prices["15-19"]!==undefined?a=t.prices["15-19"]:t.prices["18+"]!==undefined?a=t.prices["18+"]:n<=6&&t.prices["0-6"]!==undefined?a=t.prices["0-6"]:n<=12&&t.prices["7-12"]!==undefined?a=t.prices["7-12"]:n<=17&&t.prices["13-17"]!==undefined?a=t.prices["13-17"]:t.prices.adult!==undefined?a=t.prices.adult:t.prices["18+"]!==undefined&&(a=t.prices["18+"]),o+=a}),i.textContent=`ÎšÏŒÏƒÏ„Î¿Ï‚: ${o} â‚¬`,e+=o}else i&&(i.textContent="ÎšÏŒÏƒÏ„Î¿Ï‚: 0 â‚¬")}));const t=document.getElementById('overall-total');t&&(t.textContent=`Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚: ${e} â‚¬`)}
function applyComboToTotal(e,t){closeComboModal();const n=document.getElementById('overall-total');if(!n)return alert('âš ï¸ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï„Î¿ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏŒ ÎºÏŒÏƒÏ„Î¿Ï‚');const o=n.textContent.match(/(\d+\.?\d*)\s*â‚¬/),a=o?parseFloat(o[1]):0,i=Math.max(0,a-t);n.textContent=`Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚: ${i.toFixed(2)} â‚¬ (Î¼Îµ ${e})`;const c=document.querySelector('.combo-applied-note');c&&c.remove();const r=document.createElement('div');r.className='combo-applied-note',r.style.cssText="max-width:1000px;margin:15px auto;padding:12px;background:#e8f5e8;border-radius:10px;border:2px solid #4caf50;text-align:center;font-size:16px;box-shadow:0 4px 8px rgba(0,0,0,0.1)",r.innerHTML=`âœ… <strong>${e}</strong> ÎµÏ†Î±ÏÎ¼ÏŒÏƒÏ„Î·ÎºÎµ<br>ğŸ’° Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·: <strong>${t.toFixed(2)} â‚¬</strong><br>ğŸ“Š ÎÎ­Î¿ ÏƒÏÎ½Î¿Î»Î¿: <strong>${i.toFixed(2)} â‚¬</strong>`,n.parentNode.insertBefore(r,n.nextSibling),alert(`âœ… Î¤Î¿ combo "${e}" ÎµÏ†Î±ÏÎ¼ÏŒÏƒÏ„Î·ÎºÎµ!\nğŸ’° Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·: ${t.toFixed(2)}â‚¬`),localStorage.setItem('applied_combo',JSON.stringify({name:e,saving:t,date:new Date().toLocaleString('el-GR')}))}
function calculateSmartCombos(){let e=window.currentCityActivities||[];if(!e||0===e.length)return alert("âš ï¸ Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚.");const t=e.filter(e=>e.selected===!0);if(0===t.length)return alert("âš ï¸ Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ ÎµÏ€Î¹Î»Î­Î¾ÎµÎ¹ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚!");const n=categorizeFamilyMembers(),o=calculateComboRegularCost(t,n),a=[];let i=null,c=0;a.forEach(e=>{const t=e.regularPrice-e.comboPrice;t>c&&(c=t,i=e)});const r=o-(i?c:0),s={totalRegularCost:o,bestCombo:i,bestSaving:c,finalTotalCost:r,allCombos:a};displayComboResults(s,o)}
function clearRouteSelections(){closeDirectionsPanel();const e=document.createElement('div');e.textContent="âœ… ÎŸÎ¹ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚ Î´Î¹Î±Î´ÏÎ¿Î¼Î®Ï‚ ÎºÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎ±Î½",e.style.cssText="position:fixed;top:20px;right:20px;background:#3eb489;color:white;padding:12px 20px;border-radius:8px;z-index:10000;box-shadow:0 4px 12px rgba(0,0,0,0.2);animation:fadeInOut 3s ease",document.body.appendChild(e),setTimeout((()=>{e.parentNode&&e.remove()}),3e3)}document.querySelector('#route-directions-style')||(const e=document.createElement('style');e.id='route-directions-style',e.textContent='@keyframes slideOut{from{transform:translateY(0);opacity:1}to{transform:translateY(-20px);opacity:0}}@keyframes fadeInOut{0%{opacity:0;transform:translateY(-10px)}10%{opacity:1;transform:translateY(0)}90%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-10px)}}',document.head.appendChild(e))
</script>
</body>
</html>
