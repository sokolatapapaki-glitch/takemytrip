<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Οικογενειακός Οργανωτής</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial; margin: 0; background: #f0f8ff; }
        .container { display: flex; min-height: 100vh; }
        .sidebar { width: 250px; background: #3eb489; color: white; padding: 20px; }
        .main { flex: 1; padding: 20px; }
        .step { padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.2); cursor: pointer; }
        .step.active { background: white; color: #3eb489; }
        .card { background: white; padding: 15px; margin: 10px 0; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { background: #ff7f50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <!-- ΒΗΜΑΤΑ -->
        <div class="sidebar" id="sidebar">
            <h2>Βήματα Ταξιδιού</h2>
            <div class="step active" data-step="destination">1. Προορισμός</div>
            <div class="step" data-step="flight">2. Πτήσεις</div>
            <div class="step" data-step="hotel">3. Ξενοδοχεία</div>
            <div class="step" data-step="activities">4. Δραστηριότητες</div>
            <div class="step" data-step="summary">5. Πρόγραμμα</div>
            <div class="step" data-step="map">6. Χάρτης</div>
        </div>
        
        <!-- ΚΥΡΙΟ ΠΕΡΙΕΧΟΜΕΝΟ -->
        <div class="main" id="main-content">
            <!-- ΕΔΩ ΘΑ ΕΜΦΑΝΙΖΟΝΤΑΙ ΤΑ ΒΗΜΑΤΑ -->
        </div>
    </div>
    
    <!-- ΜΟΝΟ ΑΥΤΟ ΤΟ SCRIPT -->
    <script>
        // ==================== ΒΗΜΑ 1: ΠΡΟΟΡΙΣΜΟΣ ====================
        console.log("🚀 Ξεκινάμε το Βήμα 1...");
        
        // ==================== ΠΛΗΡΗΣ ΠΙΝΑΚΑΣ 25 ΠΟΛΕΩΝ ====================
const cities = [
    {name:"Βιέννη", dist:2, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό", "ΑΜΕΑ", "Ηλικιωμένοι"], desc:"Η αυτοκρατορική πόλη με τα παλάτια, τους κήπους και τα νόστιμα schnitzel."},
    {name:"Παρίσι", dist:3, weather:"Ίδια", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Η ρομαντική πόλη του φωτός με τον Πύργο του Άιφελ και τα όμορφα καφέ."},
    {name:"Ρώμη", dist:2, weather:"Πιο ζεστό", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Η αιώνια πόλη με το Κολοσσαίο, την Ρωμαϊκή Αγορά και υπέροχη ιταλική κουζίνα."},
    {name:"Λονδίνο", dist:4, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό", "ΑΜΕΑ"], desc:"Η μεγαλούπολη με το Μπιγκ Μπεν, το London Eye και τα ιστορικά μουσεία."},
    {name:"Άμστερνταμ", dist:3, weather:"Ίδια", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Η πόλη των καναλιών, των ποδηλάτων και των όμορφων γεφυρών."},
    {name:"Βουδαπέστη", dist:2, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό", "Ηλικιωμένοι"], desc:"Η όμορφη πόλη του Δούναβη με τα ιστορικά λουτρά και κάστρα."},
    {name:"Πράγα", dist:3, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Παραμυθένια πόλη με τη Γέφυρα του Καρόλου και αστρονομικό ρολόι."},
    {name:"Βερολίνο", dist:3, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό", "ΑΜΕΑ"], desc:"Πόλη με πλούσια ιστορία, μουσεία και μοντέρνα αρχιτεκτονική."},
    {name:"Μόναχο", dist:2, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Βαυαρική πρωτεύουσα, κοντά στις Άλπεις, με το BMW World."},
    {name:"Κολωνία", dist:3, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Μεγάλος καθεδρικός ναός, σοκολάτα και Ρηνανία."},
    {name:"Βαρκελώνη", dist:3, weather:"Πιο ζεστό", themeparks:"Ναι", christmas:"Όχι", vacationType:["Θάλασσα", "Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Γκαουντί, παραλίες, και η Sagrada Familia."},
    {name:"Μαδρίτη", dist:4, weather:"Ίδια", themeparks:"Ναι", christmas:"Όχι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Πρωτεύουσα με πλούσια πολιτιστική ζωή και Πάρκο Ρετίρο."},
    {name:"Λισαβόνα", dist:4, weather:"Πιο ζεστό", themeparks:"Όχι", christmas:"Όχι", vacationType:["Θάλασσα", "Πόλη"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Πορτογαλική πρωτεύουσα με γραφικά τελεφερίκ και όμορφα ακρωτήρια."},
    {name:"Δουβλίνο", dist:5, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Όχι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Φιλόξενη πόλη με παμπ, κάστρα και το Βιβλίο του Kells."},
    {name:"Εδιμβούργο", dist:5, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Όχι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Σκωτσέζικη πρωτεύουσα με κάστρο και ιστορικό κέντρο."},
    {name:"Ζυρίχη", dist:2, weather:"Χιόνια", themeparks:"Όχι", christmas:"Ναι", vacationType:["Φυσική Ομορφιά", "Πόλη"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό", "Ηλικιωμένοι"], desc:"Ελβετική πόλη με λίμνη, σοκολατοποιίες και κοντινά χιονοδρομικά."},
    {name:"Γενεύη", dist:2, weather:"Χιόνια", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πόλη", "Φυσική Ομορφιά"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό", "Ηλικιωμένοι"], desc:"Διεθνής πόλη, λίμνη Λεμάν και κοντινά βουνά."},
    {name:"Κοπεγχάγη", dist:4, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Δανέζικη πόλη, πάρκο Τίβολι και η Μικρή Γοργόνα."},
    {name:"Στοκχόλμη", dist:5, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Πρωτεύουσα της Σουηδίας, νησιά και το μουσείο ABBA."},
    {name:"Βουκουρέστι", dist:2, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Ρουμανική πρωτεύουσα, με το Παλάτι του Κοινοβουλίου."},
    {name:"Όσλο", dist:4, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Ναι", vacationType:["Φυσική Ομορφιά", "Πόλη"], costLevel:"Ακριβό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Νορβηγική πρωτεύουσα, φιόρδ και μουσεία Viking."},
    {name:"Μιλάνο", dist:2, weather:"Ίδια", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Πρωτεύουσα της μόδας με τον εντυπωσιακό Ντουόμο."},
    {name:"Φλωρεντία", dist:2, weather:"Ίδια", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Μέτριο", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Η καρδιά της Αναγέννησης, τέχνη και αρχιτεκτονική."},
    {name:"Κωνσταντινούπολη", dist:2, weather:"Ίδια", themeparks:"Ναι", christmas:"Όχι", vacationType:["Πολιτισμός", "Πόλη"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Γέφυρα μεταξύ Ευρώπης και Ασίας, Αγία Σοφία και παζάρια."},
    {name:"Σόφια", dist:1, weather:"Πιο κρύο", themeparks:"Όχι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Βουλγαρική πρωτεύουσα, με τον καθεδρικό του Αλεξάνδρου Νιέφσκι."},
    {name:"Βαρσοβία", dist:3, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Η πρωτεύουσα της Πολωνίας με ιστορικό κέντρο και όμορφα πάρκα."},
    {name:"Κρακοβία", dist:2, weather:"Πιο κρύο", themeparks:"Ναι", christmas:"Ναι", vacationType:["Πόλη", "Πολιτισμός"], costLevel:"Οικονομικό", suitableFor:["Νεογέννητα", "Παιδικό"], desc:"Η ιστορική πόλη με το βασιλικό κάστρο Wawel και την παλιά πόλη."}
];
        
        // Β. ΕΜΦΑΝΙΣΗ ΤΟΥ ΒΗΜΑΤΟΣ 1
        function showStep1() {
    const main = document.getElementById('main-content');
    
    main.innerHTML = `
        <h1>🏙️ Επιλογή Προορισμού</h1>
        
        <!-- ΦΙΛΤΡΑ ΑΠΟ ΤΟ ΠΑΛΙΟ ΚΩΔΙΚΑ -->
        <div class="card">
    <h3>🔍 Φίλτρα Αναζήτησης</h3>
    
    <!-- ΓΡΑΜΜΗ 1: Τύπος ταξιδιώτη & Απόσταση -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
        <div>
            <label>👤 Τύπος ταξιδιώτη:</label>
            <select id="travel-type" onchange="toggleFamilyOptions()" style="width:100%; padding:8px;">
                <option value="">Επιλέξτε...</option>
                <option value="Μόνος">Μόνος</option>
                <option value="Ζευγάρι">Ζευγάρι</option>
                <option value="Οικογένεια">Οικογένεια</option>
                <option value="Παρέα φίλων">Παρέα φίλων</option>
            </select>
        </div>
        
        <div>
            <label>📏 Απόσταση σε ώρες:</label>
            <select id="distance" style="width:100%; padding:8px;">
                <option value="">Όλα</option>
                <option value="1">Έως 1 ώρα</option>
                <option value="2">Έως 2 ώρες</option>
                <option value="3">Έως 3 ώρες</option>
                <option value="4">Έως 4 ώρες</option>
                <option value="5">Πάνω από 4 ώρες</option>
            </select>
        </div>
    </div>
    
    <!-- ΟΙΚΟΓΕΝΕΙΑΚΕΣ ΕΠΙΛΟΓΕΣ (κρυφές) -->
    <div id="family-options" style="display:none; background:#f0f8ff; padding:10px; border-radius:5px; margin-bottom:15px;">
        <p style="margin-top:0; font-weight:bold;">👨‍👩‍👧‍👦 Επιλογές για οικογένεια:</p>
        <label><input type="checkbox" value="Καρότσι"> Καρότσι</label>
        <label><input type="checkbox" value="Μικρά"> Μικρά</label>
        <label><input type="checkbox" value="Μεγάλα"> Μεγάλα</label>
        <label><input type="checkbox" value="Έφηβοι"> Έφηβοι</label>
        <label><input type="checkbox" value="Άνω των 18"> Άνω των 18</label>
    </div>
    
    <!-- ΓΡΑΜΜΗ 2: Καιρός + Θεματικά Πάρκα -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
        <div>
            <label>🌡️ Θερμοκρασία/Χειμώνας:</label>
            <select id="weather" style="width:100%; padding:8px;">
                <option value="">Όλα</option>
                <option value="Πιο ζεστό">Πιο ζεστό από Ελλάδα</option>
                <option value="Ίδια">Ίδια θερμοκρασία</option>
                <option value="Πιο κρύο">Πιο κρύο</option>
                <option value="Χιόνια">Πιθανά χιόνια</option>
            </select>
        </div>
        
        <div>
            <label>🎢 Θεματικά πάρκα:</label>
            <select id="themeparks" style="width:100%; padding:8px;">
                <option value="">Αδιάφορο</option>
                <option value="Ναι">Ναι</option>
                <option value="Όχι">Όχι</option>
            </select>
        </div>
    </div>
    
    <!-- ΓΡΑΜΜΗ 3: Χριστουγεννιάτικες αγορές + Τύπος Διακοπών -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
        <div>
            <label>🎄 Χριστουγεννιάτικες αγορές:</label>
            <select id="christmas" style="width:100%; padding:8px;">
                <option value="">Αδιάφορο</option>
                <option value="Ναι">Ναι</option>
                <option value="Όχι">Όχι</option>
            </select>
        </div>
        
        <div>
            <label>🏖️ Τύπος Διακοπών:</label>
            <select id="vacation-type" style="width:100%; padding:8px;">
                <option value="">Όλα</option>
                <option value="Πολιτισμός">Πολιτισμός & Μουσεία</option>
                <option value="Φυσική Ομορφιά">Φυσική Ομορφιά</option>
                <option value="Θάλασσα">Θαλάσσια & Παραλίες</option>
                <option value="Πόλη">Αστικές Διακοπές</option>
                <option value="Βουνό">Βουνό & Χιονοδρομικά</option>
            </select>
        </div>
    </div>
    
    <!-- ΚΟΥΜΠΙΑ -->
    <div style="display: flex; gap: 10px;">
        <button onclick="filterCitiesAdvanced()" style="flex: 3; padding: 12px; background: #3eb489;">
            🔍 Εφαρμογή Φίλτρων
        </button>
        <button onclick="resetFilters()" style="flex: 1; padding: 12px; background: #6c757d;">
            🔄 Επαναφορά
        </button>
    </div>
</div>
   
        <div id="cities-list">
            ${renderAllCities()}
        </div>
    `;
}

// ΣΥΝΑΡΤΗΣΗ ΓΙΑ ΤΟ FAMILY OPTIONS (από παλιό κώδικα)
function toggleFamilyOptions() {
    const type = document.getElementById("travel-type").value;
    const optionsDiv = document.getElementById("family-options");
    optionsDiv.style.display = (type === "Οικογένεια") ? "block" : "none";
}

// ΣΥΝΑΡΤΗΣΗ ΓΙΑ ΝΑ ΕΜΦΑΝΙΖΕΙ ΠΟΛΕΙΣ (θα την συμπληρώσουμε)
function renderAllCities() {
    // ΠΡΟΣΘΗΚΗ: Θα βάλω εδώ τον πλήρη πίνακα με 25 πόλεις
    return cities.map(city => `
        <div class="card">
            <h3>${city.name}</h3>
            <p>${city.desc}</p>
            <button onclick="selectCity('${city.name}')">Επιλογή</button>
        </div>
    `).join('');
}

// ΣΥΝΑΡΤΗΣΗ ΓΙΑ ΤΑ ΝΕΑ ΦΙΛΤΡΑ
function filterCitiesAdvanced() {
    // Διάβασε όλα τα φίλτρα
    const travelType = document.getElementById("travel-type").value;
    const distance = document.getElementById("distance").value;
    const weather = document.getElementById("weather").value;
    const themeparks = document.getElementById("themeparks").value;
    const christmas = document.getElementById("christmas").value;
    const vacationType = document.getElementById("vacation-type").value;
    
    console.log(`🔍 Φιλτράρισμα με:`, {travelType, distance, weather, themeparks, christmas, vacationType});
    
    // Φίλτραρε τις πόλεις
    const filtered = cities.filter(city => {
        let match = true;
        
        // 1. Φίλτρο ΑΠΟΣΤΑΣΗΣ
        if (distance && distance !== "") {
            if (distance === "5") {
                match = match && (city.dist > 4);
            } else {
                match = match && (city.dist <= parseInt(distance));
            }
        }
        
        // 2. Φίλτρο ΚΑΙΡΟΥ
        if (weather && weather !== "") {
            match = match && (city.weather === weather);
        }
        
        // 3. Φίλτρο ΘΕΜΑΤΙΚΩΝ ΠΑΡΚΩΝ
        if (themeparks && themeparks !== "") {
            if (themeparks === "Ναι") {
                match = match && (city.themeparks === "Ναι");
            } else if (themeparks === "Όχι") {
                match = match && (city.themeparks !== "Ναι");
            }
        }
        
        // 4. Φίλτρο ΧΡΙΣΤΟΥΓΕΝΝΙΑΤΙΚΩΝ ΑΓΟΡΩΝ
        if (christmas && christmas !== "") {
            if (christmas === "Ναι") {
                match = match && (city.christmas === "Ναι");
            } else if (christmas === "Όχι") {
                match = match && (city.christmas !== "Ναι");
            }
        }
        
        // 5. Φίλτρο ΤΥΠΟΥ ΔΙΑΚΟΠΩΝ
        if (vacationType && vacationType !== "") {
            match = match && (city.vacationType && city.vacationType.includes(vacationType));
        }
        
        return match;
    });
    
    // Εμφάνισε αποτελέσματα
    const container = document.getElementById('cities-list');
    
    if (filtered.length === 0) {
        container.innerHTML = `
            <div class="card" style="background:#fff3cd; border-color:#ffeaa7;">
                <h3>🔍 Δεν βρέθηκαν προορισμοί</h3>
                <p>Δοκιμάστε με διαφορετικά φίλτρα.</p>
                <button onclick="resetFilters()">🔄 Επαναφορά Φίλτρων</button>
            </div>
        `;
        return;
    }
    
    // Εμφάνισε τις φιλτραρισμένες πόλεις
    let html = `<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-top: 20px;">`;
    
    filtered.forEach(city => {
        html += `
            <div class="card" style="border-left: 4px solid #3eb489;">
                <h3>${city.name}</h3>
                <p>${city.desc}</p>
                <div style="font-size: 0.9em; color: #666; margin: 10px 0;">
                    📏 <strong>Απόσταση:</strong> ${city.dist} ώρες<br>
                    🌡️ <strong>Καιρός:</strong> ${city.weather}<br>
                    🎢 <strong>Θεματικά πάρκα:</strong> ${city.themeparks}<br>
                    🎄 <strong>Χριστουγεννιάτικες αγορές:</strong> ${city.christmas}<br>
                    💰 <strong>Κόστος:</strong> ${city.costLevel}
                </div>
                <button onclick="selectCity('${city.name}')" style="background: #3eb489;">
                    🏙️ Επιλογή
                </button>
            </div>
        `;
    });
    
    html += `</div>`;
    container.innerHTML = html;
    
    // Μήνυμα επιβεβαίωσης
    const message = document.createElement('div');
    message.textContent = `✅ Βρέθηκαν ${filtered.length} προορισμοί`;
    message.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #3eb489; color: white; padding: 10px; border-radius: 8px; z-index: 1000;';
    document.body.appendChild(message);
    setTimeout(() => message.remove(), 3000);
}

function resetFilters() {
    document.getElementById("travel-type").value = "";
    document.getElementById("distance").value = "";
    const optionsDiv = document.getElementById("family-options");
    optionsDiv.style.display = "none";
    
    const citiesList = document.getElementById('cities-list');
    citiesList.innerHTML = renderAllCities();
    
    alert("Τα φίλτρα επαναφέρθηκαν!");
}
        
        // Γ. ΣΥΝΑΡΤΗΣΕΙΣ
        function filterCities() {
            const selected = document.getElementById('city-filter').value;
            const citiesList = document.getElementById('cities-list');
            
            if (!selected) {
                // Επανάφερε όλες
                citiesList.innerHTML = cities.map(city => `
                    <div class="card">
                        <h3>${city.name}</h3>
                        <p>${city.desc}</p>
                        <button onclick="selectCity('${city.name}')">Επιλογή</button>
                    </div>
                `).join('');
                return;
            }
            
            // Φίλτραρε
            const filtered = cities.filter(city => city.name === selected);
            
            citiesList.innerHTML = filtered.map(city => `
                <div class="card">
                    <h3>${city.name}</h3>
                    <p>${city.desc}</p>
                    <button onclick="selectCity('${city.name}')">Επιλογή</button>
                </div>
            `).join('');
        }
        
        function selectCity(cityName) {
            alert(`✅ Επιλέξατε: ${cityName}`);
            localStorage.setItem('destination', cityName);
            
            // Ενημέρωση sidebar
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.querySelector('[data-step="flight"]').classList.add('active');
            
            // Πήγαινε στο βήμα 2
            showStep2();
        }
        
        // Δ. ΒΗΜΑ 2 (απλό)
        function showStep2() {
            const main = document.getElementById('main-content');
            const destination = localStorage.getItem('destination') || 'Χωρίς προορισμό';
            
            main.innerHTML = `
                <h1>✈️ Βήμα 2: Πτήσεις</h1>
                <div class="card">
                    <h3>Προορισμός: ${destination}</h3>
                    <p>Αναζήτηση πτήσεων για ${destination}</p>
                    <a href="https://www.skyscanner.net" target="_blank">
                        <button>🔍 Αναζήτηση στο Skyscanner</button>
                    </a>
                    <button onclick="showStep3()" style="margin-top: 10px;">➡️ Συνέχεια</button>
                </div>
            `;
        }
        
        // Ε. ΒΗΜΑ 3 (απλό)
        function showStep3() {
            const main = document.getElementById('main-content');
            
            main.innerHTML = `
                <h1>🏨 Βήμα 3: Ξενοδοχεία</h1>
                <div class="card">
                    <h3>Αναζήτηση ξενοδοχείου</h3>
                    <input type="text" id="hotel-city" placeholder="Πόλη" value="${localStorage.getItem('destination') || ''}">
                    <button onclick="searchHotels()">🔍 Βρες Ξενοδοχεία</button>
                    <button onclick="showStep4()" style="margin-top: 10px;">➡️ Συνέχεια</button>
                </div>
            `;
            
            // Ενημέρωση sidebar
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.querySelector('[data-step="hotel"]').classList.add('active');
        }
        // ==================== ΒΗΜΑ 4: ΟΙΚΟΓΕΝΕΙΑ & ΔΡΑΣΤΗΡΙΟΤΗΤΕΧ ====================

// Γлобική μεταβλητή για τα μέλη της οικογένειας
let familyMembers = [];

function showStep4() {
    const destination = localStorage.getItem('destination') || 'Χωρίς προορισμό';
    
    // Ενημέρωση sidebar
    document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
    document.querySelector('[data-step="activities"]').classList.add('active');
    
    const main = document.getElementById('main-content');
    
    main.innerHTML = `
        <h1>👨‍👩‍👧‍👦 Βήμα 4: Οικογένεια & Δραστηριότητες</h1>
        
        <div class="card" style="background: #e8f5e9; border-color: #4caf50;">
            <h3>🏙️ Προορισμός: ${destination}</h3>
            <p>Πρώτα, προσθέστε τα μέλη της οικογένειας:</p>
        </div>
        
        <!-- ΜΕΛΗ ΟΙΚΟΓΕΝΕΙΑΣ -->
        <div class="card" id="family-container">
            <h3>👨‍👩‍👧‍👦 Τα Μέλη Της Οικογένειας</h3>
            <div id="family-members-list">
                <!-- ΕΔΩ ΘΑ ΕΜΦΑΝΙΖΟΝΤΑΙ ΤΑ ΜΕΛΗ -->
                               <div class="family-member">
                    <input type="text" placeholder="Όνομα (π.χ. Πατέρας)" value="Πατέρας" class="member-name">
                    <input type="number" placeholder="Ηλικία" class="member-age" min="0" max="120">
                    <span>ετών</span>
                </div>
                <div class="family-member">
                    <input type="text" placeholder="Όνομα (π.χ. Μητέρα)" value="Μητέρα" class="member-name">
                    <input type="number" placeholder="Ηλικία" class="member-age" min="0" max="120">
                    <span>ετών</span>
                </div>
            </div>
            
            <div style="margin: 20px 0; text-align: center;">
                <h4>➕ Προσθήκη Μελών</h4>
                <div style="display: flex; gap: 10px; justify-content: center; margin: 15px 0;">
                    <button onclick="addFamilyMember('adult')" style="background: #3eb489;">
                        👨 Προσθήκη Ενήλικα
                    </button>
                    <button onclick="addFamilyMember('child')" style="background: #4c7af0;">
                        🧒 Προσθήκη Παιδιού
                    </button>
                    <button onclick="addFamilyMember('baby')" style="background: #ff7f50;">
                        👶 Προσθήκη Μωρού
                    </button>
                </div>
                
                <button onclick="updateFamilyAndLoadActivities()" style="background: #9c27b0; padding: 12px 25px;">
                    🔄 Ενημέρωση Οικογένειας & Φόρτωση Δραστηριοτήτων
                </button>
            </div>
        </div>
        
        <!-- ΔΡΑΣΤΗΡΙΟΤΗΤΕΧ (θα εμφανιστεί αργότερα) -->
        <div id="activities-container" style="display: none;">
            <!-- Θα γεμίσει με δραστηριότητες -->
        </div>
    `;
    
    // Προσθήκη CSS για τα μέλη οικογένειας
    if (!document.querySelector('#family-styles')) {
        const style = document.createElement('style');
        style.id = 'family-styles';
        style.textContent = `
            .family-member {
                display: flex;
                align-items: center;
                gap: 10px;
                margin: 10px 0;
                padding: 10px;
                background: #f8f9fa;
                border-radius: 8px;
            }
            .family-member input {
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 5px;
            }
            .member-name { flex: 2; }
            .member-age { flex: 1; }
        `;
        document.head.appendChild(style);
    }
    
    // Αρχικοποίηση της οικογένειας
    initFamilyMembers();
}

// Συναρτήσεις για τα μέλη οικογένειας
function initFamilyMembers() {
    // Έλεγξε αν υπάρχει αποθηκευμένη οικογένεια
    const savedFamily = localStorage.getItem('familyMembers');
    
    if (savedFamily) {
        familyMembers = JSON.parse(savedFamily);
        console.log("📂 Φορτώθηκε αποθηκευμένη οικογένεια:", familyMembers);
    } else {
        // ΚΑΝΕΝΑ προκαθορισμένο μέλος - Ο χρήστης θα προσθέσει όσα θέλει
        familyMembers = [];
        console.log("🆕 Κενή οικογένεια - ο χρήστης θα προσθέσει μέλη");
    }
    renderFamilyMembers();
}

function renderFamilyMembers() {
    const container = document.getElementById('family-members-list');
    if (!container) return;
    
    // Αν δεν υπάρχουν μέλη, δείξε μήνυμα
    if (familyMembers.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                <p>📭 Δεν υπάρχουν μέλη οικογένειας ακόμα</p>
                <p>Πατήστε στα κουμπιά "Προσθήκη" για να ξεκινήσετε</p>
            </div>
        `;
        return;
    }
    
    // Εμφάνισε όλα τα μέλη
    container.innerHTML = familyMembers.map((member, index) => `
        <div class="family-member">
            <input type="text" placeholder="Όνομα" value="${member.name || ''}" 
                   class="member-name" onchange="updateFamilyMember(${index}, this.value, 'name')">
            <input type="number" placeholder="Ηλικία" value="${member.age || ''}" 
                   class="member-age" min="0" max="120" onchange="updateFamilyMember(${index}, this.value, 'age')">
            <span>ετών</span>
            <button onclick="removeFamilyMember(${index})" 
                    style="background:#dc3545; color:white; border:none; border-radius:4px; padding:5px 10px; cursor:pointer;">
                ×
            </button>
        </div>
    `).join('');
}

function addFamilyMember(type) {
    let name, age;
    
    if (type === 'adult') {
        name = `Ενήλικας ${familyMembers.filter(m => m.name.includes('Ενήλικας')).length + 1}`;
        age = 30;
    } else if (type === 'child') {
        name = `Παιδί ${familyMembers.filter(m => m.name.includes('Παιδί')).length + 1}`;
        age = 10;
    } else {
        name = `Μωρό ${familyMembers.filter(m => m.name.includes('Μωρό')).length + 1}`;
        age = 2;
    }
    
    familyMembers.push({ name, age: parseInt(age) });
    renderFamilyMembers();
}

function updateFamilyMember(index, value, field) {
    if (field === 'name') {
        familyMembers[index].name = value;
    } else {
        familyMembers[index].age = parseInt(value) || 0;
    }
}

function removeFamilyMember(index) {
    familyMembers.splice(index, 1);
    renderFamilyMembers();
}

function updateFamilyAndLoadActivities() {
    // 1. ΕΛΕΓΧΟΣ: Υπάρχουν έγκυρα μέλη;
    const validMembers = familyMembers.filter(member => 
        member.name && member.name.trim() !== "" && 
        member.age && member.age > 0
    );
    
    if (validMembers.length === 0) {
        alert("⚠️ Πρέπει να προσθέσετε τουλάχιστον 1 μέλος με όνομα και ηλικία!");
        return;
    }
    
    // 2. Ενημέρωση πίνακα με τα έγκυρα μέλη
    familyMembers = validMembers;
    
    console.log("👨‍👩‍👧‍👦 Οικογένεια ενημερώθηκε:", familyMembers);
    
    // 3. Αποθήκευση
    localStorage.setItem('familyMembers', JSON.stringify(familyMembers));
    
    // 4. Μήνυμα επιβεβαίωσης
    const ageGroups = categorizeFamilyMembers();
    let message = `✅ Οικογένεια ενημερώθηκε: ${familyMembers.length} μέλη\n\n`;
    
    Object.entries(ageGroups).forEach(([group, count]) => {
        if (count > 0) {
            message += `• ${group}: ${count} άτομα\n`;
        }
    });
    
    alert(message);
    
        // 5. Φόρτωση δραστηριοτήτων
    loadCityActivities();
}
// ==================== ΦΟΡΤΩΣΗ ΔΡΑΣΤΗΡΙΟΤΗΤΩΝ ====================

async function loadCityActivities() {
    const destination = localStorage.getItem('destination');
    
    if (!destination) {
        alert("⚠️ Δεν έχετε επιλέξει προορισμό! Επιστρέψτε στο Βήμα 1.");
        return;
    }
    
    if (familyMembers.length === 0) {
        alert("⚠️ Δεν έχετε προσθέσει μέλη οικογένειας!");
        return;
    }
    
    // Μήνυμα φόρτωσης
    const activitiesContainer = document.getElementById('activities-container');
    activitiesContainer.innerHTML = `
        <div class="card" style="text-align: center; padding: 30px;">
            <h3>⏳ Φόρτωση δραστηριοτήτων για ${destination}...</h3>
            <p>Παρακαλώ περιμένετε</p>
        </div>
    `;
    activitiesContainer.style.display = 'block';
    
    // Προσομοίωση φόρτωσης (θα το αντικαταστήσουμε με πραγματικό JSON)
    setTimeout(() => {
        displayMockActivities(destination);
    }, 1500);
}

// Προσωρινή συνάρτηση με δοκιμαστικές δραστηριότητες
function displayMockActivities(cityName) {
    console.log(`🏙️ Φόρτωση δραστηριοτήτων για: ${cityName}`);
    
    // Διαφορετικές δραστηριότητες ανά πόλη
    const activitiesByCity = {
        "Βιέννη": [
            { name: "Σαινμπρούν Παλάτι", desc: "Αυτοκρατορικό παλάτι με κήπους", priceAdult: 20, priceChild: 10 },
            { name: "Πρατέρ Πάρκ", desc: "Θεματικό πάρκο με ρόδες", priceAdult: 15, priceChild: 8 },
            { name: "Κέντρο της Βιέννης", desc: "Περίπατος στην ιστορική πόλη", priceAdult: 0, priceChild: 0 }
        ],
        "Παρίσι": [
            { name: "Πύργος του Άιφελ", desc: "Σύμβολο του Παρισιού", priceAdult: 25, priceChild: 12 },
            { name: "Λούβρο", desc: "Παγκόσμιο μουσείο τέχνης", priceAdult: 17, priceChild: 0 },
            { name: "Disneyland Paris", desc: "Θεματικό πάρκο", priceAdult: 80, priceChild: 70 }
        ],
        "Λονδίνο": [
            { name: "London Eye", desc: "Τροχός με θέα την πόλη", priceAdult: 30, priceChild: 15 },
            { name: "Μουσείο Φυσικής Ιστορίας", desc: "Δωρεάν μουσείο", priceAdult: 0, priceChild: 0 },
            { name: "Sea Life Ακουάριο", desc: "Υποβρύχιος κόσμος", priceAdult: 25, priceChild: 18 }
        ]
    };
    
    // Επιλογή δραστηριοτήτων για την πόλη ή γενικές
    const activities = activitiesByCity[cityName] || [
        { name: "Ιστορικό Κέντρο", desc: "Περιήγηση στην παλιά πόλη", priceAdult: 0, priceChild: 0 },
        { name: "Τοπικό Μουσείο", desc: "Μάθετε την ιστορία", priceAdult: 10, priceChild: 5 },
        { name: "Πάρκο Ανάπαυσης", desc: "Χρόνος για χαλάρωση", priceAdult: 0, priceChild: 0 }
    ];
    
    // Εμφάνιση δραστηριοτήτων
    const container = document.getElementById('activities-container');
    
    let html = `
        <div class="card" style="background: #e3f2fd;">
            <h3>🎯 Διαθέσιμες Δραστηριότητες για ${cityName}</h3>
            <p>Επιλέξτε τις δραστηριότητες που σας ενδιαφέρουν:</p>
        </div>
        
        <div id="activities-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-top: 20px;">
    `;
    
    activities.forEach((activity, index) => {
        html += `
            <div class="card activity-card" id="activity-${index}" onclick="toggleActivitySelection(${index})" 
                 style="cursor: pointer; transition: all 0.3s; border: 2px solid #ddd;">
                <h4>${activity.name}</h4>
                <p>${activity.desc}</p>
                <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>💰 Τιμές:</strong><br>
                    • Ενήλικας: ${activity.priceAdult}€<br>
                    • Παιδί (0-17): ${activity.priceChild}€
                </div>
                <div class="activity-total" id="activity-total-${index}">
                    Κόστος για την οικογένεια σας: <strong>0€</strong>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span style="color: #ffd700; font-size: 24px; opacity: 0.3;">⭐</span>
                    <p style="color: #666; font-size: 0.9em;">Κάντε κλικ για επιλογή</p>
                </div>
            </div>
        `;
    });
    
    html += `
        </div>
        
        <div class="card" style="text-align: center; margin-top: 20px; background: #fff3cd;">
            <h3>💰 ΣΥΝΟΛΙΚΟ ΚΟΣΤΟΣ</h3>
            <div id="total-cost" style="font-size: 28px; font-weight: bold; color: #3eb489;">
                0 €
            </div>
            <p>Για ${familyMembers.length} μέλη οικογένειας</p>
        </div>
    `;
    
    container.innerHTML = html;
    
    // Αποθήκευση των δραστηριοτήτων για υπολογισμούς
    window.currentActivities = activities;
    
    // Υπολογισμός αρχικού κόστους
    calculateTotalCost();
}

// Συνάρτηση επιλογής/αποεπιλογής δραστηριότητας
function toggleActivitySelection(index) {
    const card = document.getElementById(`activity-${index}`);
    const star = card.querySelector('span');
    
    // Αλλαγή κατάστασης
    if (card.classList.contains('selected')) {
        card.classList.remove('selected');
        card.style.borderColor = '#ddd';
        card.style.backgroundColor = 'white';
        star.style.opacity = '0.3';
        window.currentActivities[index].selected = false;
    } else {
        card.classList.add('selected');
        card.style.borderColor = '#3eb489';
        card.style.backgroundColor = '#f0f9f0';
        star.style.opacity = '1';
        window.currentActivities[index].selected = true;
    }
    
    // Υπολογισμός νέου κόστους
    calculateTotalCost();
}

// Υπολογισμός συνολικού κόστους
function calculateTotalCost() {
    if (!window.currentActivities || !familyMembers) return;
    
    let total = 0;
    
    window.currentActivities.forEach((activity, index) => {
        if (activity.selected) {
            let activityTotal = 0;
            
            // Υπολογισμός για κάθε μέλος
            familyMembers.forEach(member => {
                const age = parseInt(member.age);
                if (isNaN(age)) return;
                
                if (age >= 18) {
                    activityTotal += activity.priceAdult || 0;
                } else {
                    activityTotal += activity.priceChild || 0;
                }
            });
            
            // Ενημέρωση του συγκεκριμένου activity
            const activityTotalElement = document.getElementById(`activity-total-${index}`);
            if (activityTotalElement) {
                activityTotalElement.innerHTML = `Κόστος για την οικογένεια σας: <strong>${activityTotal}€</strong>`;
            }
            
            total += activityTotal;
        } else {
            // Επαναφορά αν δεν είναι selected
            const activityTotalElement = document.getElementById(`activity-total-${index}`);
            if (activityTotalElement) {
                activityTotalElement.innerHTML = `Κόστος για την οικογένεια σας: <strong>0€</strong>`;
            }
        }
    });
    
    // Ενημέρωση συνολικού κόστους
    const totalElement = document.getElementById('total-cost');
    if (totalElement) {
        totalElement.textContent = `${total} €`;
        
        // Αλλαγή χρώματος ανάλογα με το κόστος
        if (total === 0) {
            totalElement.style.color = '#666';
        } else if (total > 200) {
            totalElement.style.color = '#e74c3c';
        } else {
            totalElement.style.color = '#3eb489';
        }
    }
}

// ==================== ΒΗΜΑ 5: ΤΕΛΙΚΗ ΣΥΝΟΨΗ ====================

function showStep5() {
    console.log("🎯 Η showStep5() ΚΑΛΕΙΤΑΙ!");
    
    const destination = localStorage.getItem('destination');
    const savedFamily = localStorage.getItem('familyMembers');
    const familyMembers = savedFamily ? JSON.parse(savedFamily) : [];
    
    // Ενημέρωση sidebar
    document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
    document.querySelector('[data-step="summary"]').classList.add('active');
    
    const main = document.getElementById('main-content');
    
    // Αν δεν υπάρχει προορισμός, εμφάνιση μηνύματος
    if (!destination) {
        main.innerHTML = `
            <div class="card" style="text-align: center; padding: 40px;">
                <h2>📋 Τελική Σύνοψη Ταξιδιού</h2>
                <p style="color: #666; margin: 20px 0;">Δεν έχετε επιλέξει προορισμό ακόμα.</p>
                <button onclick="showStep1()" style="background: #3eb489; padding: 12px 25px;">
                    ↩️ Επιστροφή στο Βήμα 1
                </button>
            </div>
        `;
        return;
    }
    
    // Αν υπάρχουν δραστηριότητες
    const selectedActivities = window.currentActivities ? 
        window.currentActivities.filter(act => act.selected) : [];
    
    // Υπολογισμός συνολικού κόστους
    let totalCost = 0;
    if (selectedActivities.length > 0 && familyMembers.length > 0) {
        selectedActivities.forEach(activity => {
            familyMembers.forEach(member => {
                const age = parseInt(member.age);
                if (isNaN(age)) return;
                
                if (age >= 18) {
                    totalCost += activity.priceAdult || 0;
                } else {
                    totalCost += activity.priceChild || 0;
                }
            });
        });
    }
    
    // Κατηγοριοποίηση οικογένειας
    const ageGroups = categorizeFamilyForDisplay(familyMembers);
    
    main.innerHTML = `
        <h1>📋 Βήμα 5: Τελική Σύνοψη & Πρόγραμμα</h1>
        
        <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <h2 style="margin-top: 0;">✈️ Το Ταξίδι Σας είναι Έτοιμο!</h2>
            <p>Ακολουθεί η πλήρης σύνοψη των επιλογών σας.</p>
        </div>
        
        <!-- ΠΛΗΡΟΦΟΡΙΕΣ ΤΑΞΙΔΙΟΥ -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
            <!-- ΠΡΟΟΡΙΣΜΟΣ -->
            <div class="card" style="border-left: 5px solid #3eb489;">
                <h3>🏙️ Προορισμός</h3>
                <div style="font-size: 28px; font-weight: bold; color: #3eb489; margin: 10px 0;">
                    ${destination}
                </div>
                <p>Οι επιλογές σας βασίστηκαν στις προτιμήσεις σας από τα φίλτρα.</p>
            </div>
            
            <!-- ΟΙΚΟΓΕΝΕΙΑ -->
            <div class="card" style="border-left: 5px solid #4c7af0;">
                <h3>👨‍👩‍👧‍👦 Οικογένεια</h3>
                <div style="font-size: 24px; font-weight: bold; color: #4c7af0; margin: 10px 0;">
                    ${familyMembers.length} μέλη
                </div>
                <div style="font-size: 0.9em; color: #666;">
                    ${ageGroups}
                </div>
            </div>
            
            <!-- ΚΟΣΤΟΣ -->
            <div class="card" style="border-left: 5px solid ${totalCost > 0 ? '#ff7f50' : '#6c757d'};">
                <h3>💰 Εκτιμώμενο Κόστος</h3>
                <div style="font-size: ${totalCost > 0 ? '32px' : '24px'}; font-weight: bold; color: ${totalCost > 0 ? '#ff7f50' : '#666'}; margin: 10px 0;">
                    ${totalCost > 0 ? `${totalCost} €` : 'Δεν υπολογίστηκε'}
                </div>
                <p>${totalCost > 0 ? `Για ${selectedActivities.length} δραστηριότητες` : 'Προσθέστε δραστηριότητες στο Βήμα 4'}</p>
            </div>
        </div>
        
        <!-- ΕΠΙΛΕΓΜΕΝΕΣ ΔΡΑΣΤΗΡΙΟΤΗΤΕΣ -->
        ${selectedActivities.length > 0 ? `
        <div class="card" style="margin-top: 20px;">
            <h3>🎯 Επιλεγμένες Δραστηριότητες (${selectedActivities.length})</h3>
            <div style="max-height: 300px; overflow-y: auto; margin-top: 15px;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Δραστηριότητα</th>
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Περιγραφή</th>
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Κόστος/Άτομο</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${selectedActivities.map(activity => `
                            <tr style="border-bottom: 1px solid #eee;">
                                <td style="padding: 10px;"><strong>${activity.name}</strong></td>
                                <td style="padding: 10px;">${activity.desc}</td>
                                <td style="padding: 10px;">
                                    👨 Ενήλικας: ${activity.priceAdult}€<br>
                                    🧒 Παιδί: ${activity.priceChild}€
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
        </div>
        ` : `
        <div class="card" style="margin-top: 20px; background: #fff3cd; border-color: #ffeaa7;">
            <h3>🎯 Επιλεγμένες Δραστηριότητες</h3>
            <p>Δεν έχετε επιλέξει δραστηριότητες ακόμα.</p>
            <button onclick="showStep4()" style="background: #ffc107; color: #333; margin-top: 10px;">
                ➡️ Πηγαίνετε στο Βήμα 4
            </button>
        </div>
        `}
        
        <!-- ΠΡΟΤΑΣΕΙΣ ΓΙΑ ΤΟ ΤΑΞΙΔΙ (βασισμένες σε γενικές συμβουλές) -->
        <div class="card" style="margin-top: 20px; background: #e8f5e8; border-color: #4caf50;">
            <h3>💡 Συμβουλές για Ομαλό Ταξίδι</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; color: #3eb489;">🎒 Πακετάρισμα</h4>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Προτίμησε ουδέτερα και ευέλικτα ρούχα</li>
                        <li>Μαζί σου αγαπημένα παιχνίδια για άνεση</li>
                        <li>Βασικά φάρμακα και αντηλιακό</li>
                    </ul>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; color: #4c7af0;">🏨 Διαμονή</h4>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Επιλογή φιλικών προς οικογένειες ξενοδοχείων</li>
                        <li>Έλεγχος για εγκαταστάσεις όπως κούνιες</li>
                        <li>Διαθέσιμα παιδικά προγράμματα ψυχαγωγίας</li>
                    </ul>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; color: #ff7f50;">🚗 Μετακινήσεις</h4>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Προγραμματισμός διαδρομών με χρόνο για διαλείμματα</li>
                        <li>Ψυχαγωγία για παιδιά κατά τη διάρκεια ταξιδιών</li>
                        <li>Εύρεση τοπικών παρκ για παιχνίδι</li>
                    </ul>
                </div>
            </div>
            <p style="font-size: 0.9em; color: #666; margin-top: 15px; margin-bottom: 0;">
                💡 <strong>Συμβουλή:</strong> Κρατήστε εύκολα προσβάσιμους τους τοπικούς αριθμούς έκτακτης ανάγκης.
            </p>
        </div>
        
        <!-- ΚΟΥΜΠΙΑ ΕΝΕΡΓΕΙΩΝ -->
        <div class="card" style="margin-top: 20px; text-align: center;">
            <h3>📥 Εξαγωγή & Αποθήκευση</h3>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px; flex-wrap: wrap;">
                <button onclick="saveTripSummary()" style="background: #3eb489; padding: 15px 30px; font-size: 16px;">
                    💾 Αποθήκευση Σύνοψης
                </button>
                <button onclick="printTripSummary()" style="background: #4c7af0; padding: 15px 30px; font-size: 16px;">
                    🖨️ Εκτύπωση
                </button>
                <button onclick="showStep6()" style="background: #ff7f50; padding: 15px 30px; font-size: 16px;">
                    🗺️ Συνέχεια στον Χάρτη
                </button>
            </div>
        </div>
    `;
}

// Βοηθητική συνάρτηση για κατηγοριοποίηση
function categorizeFamilyForDisplay(familyMembers) {
    if (!familyMembers || familyMembers.length === 0) return "Δεν υπάρχουν μέλη";
    
    const groups = {
        "0-2": 0, "3-5": 0, "6-14": 0, "15-17": 0, "18+": 0
    };
    
    familyMembers.forEach(member => {
        const age = parseInt(member.age);
        if (isNaN(age)) return;
        
        if (age <= 2) groups["0-2"]++;
        else if (age <= 5) groups["3-5"]++;
        else if (age <= 14) groups["6-14"]++;
        else if (age <= 17) groups["15-17"]++;
        else groups["18+"]++;
    });
    
    // Δημιουργία εμφανίσιμου κειμένου
    const result = [];
    Object.entries(groups).forEach(([group, count]) => {
        if (count > 0) {
            result.push(`${group}: ${count}`);
        }
    });
    
    return result.length > 0 ? result.join(", ") : "Χωρίς ηλικίες";
}

// Συνάρτηση αποθήκευσης σύνοψης
function saveTripSummary() {
    const tripData = {
        destination: localStorage.getItem('destination'),
        family: JSON.parse(localStorage.getItem('familyMembers') || '[]'),
        activities: window.currentActivities ? 
            window.currentActivities.filter(act => act.selected) : [],
        timestamp: new Date().toISOString(),
        version: '1.0'
    };
    
    // Αποθήκευση σε localStorage
    localStorage.setItem('tripSummary', JSON.stringify(tripData));
    
    // Εμφάνιση μηνύματος επιβεβαίωσης
    const message = document.createElement('div');
    message.textContent = '✅ Η σύνοψη ταξιδιού αποθηκεύτηκε!';
    message.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #3eb489;
        color: white;
        padding: 15px 25px;
        border-radius: 8px;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        animation: fadeInOut 3s ease;
    `;
    document.body.appendChild(message);
    
    setTimeout(() => {
        if (message.parentNode) message.remove();
    }, 3000);
    
    console.log('💾 Ταξίδι αποθηκεύτηκε:', tripData);
}

// Συνάρτηση εκτύπωσης
function printTripSummary() {
    window.print();
}

// CSS για εκτύπωση
if (!document.querySelector('#print-styles')) {
    const style = document.createElement('style');
    style.id = 'print-styles';
    style.textContent = `
        @media print {
            body * {
                visibility: hidden;
            }
            #main-content, #main-content * {
                visibility: visible;
            }
            #main-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            button {
                display: none !important;
            }
            .card {
                break-inside: avoid;
                page-break-inside: avoid;
            }
        }
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-10px); }
            15% { opacity: 1; transform: translateY(0); }
            85% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }
    `;
    document.head.appendChild(style);
}

// ==================== ΒΗΜΑ 6: ΧΑΡΤΗΣ (ΑΠΛΟ) ====================

// ==================== ΒΗΜΑ 6: ΔΙΑΔΡΑΣΤΙΚΟΣ ΧΑΡΤΗΣ ====================

function showStep6() {
    const destination = localStorage.getItem('destination');
    const selectedActivities = window.currentActivities ? 
        window.currentActivities.filter(act => act.selected) : [];
    
    // Ενημέρωση sidebar
    document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
    document.querySelector('[data-step="map"]').classList.add('active');
    
    const main = document.getElementById('main-content');
    
    // Προσθήκη Leaflet CSS αν δεν υπάρχει
    if (!document.querySelector('link[href*="leaflet"]')) {
        const leafletCSS = document.createElement('link');
        leafletCSS.rel = 'stylesheet';
        leafletCSS.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
        leafletCSS.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
        leafletCSS.crossOrigin = '';
        document.head.appendChild(leafletCSS);
    }
    
    main.innerHTML = `
        <h1>🗺️ Βήμα 6: Διαδραστικός Χάρτης</h1>
        
        <!-- ΚΟΝΤΕΙΝΕΡ ΧΑΡΤΗ -->
        <div id="map-container" style="height: 500px; width: 100%; border-radius: 10px; overflow: hidden; margin: 20px 0; border: 2px solid #3eb489;"></div>
        
        <!-- ΠΛΗΡΟΦΟΡΙΕΣ ΧΑΡΤΗ -->
        <div class="card" style="background: #e8f5e8;">
            <h3>📍 Χάρτης Προορισμού: ${destination || 'Χωρίς προορισμό'}</h3>
            <p>${selectedActivities.length > 0 ? 
                `Βλέπετε ${selectedActivities.length} επιλεγμένες δραστηριότητες στον χάρτη` : 
                'Δεν έχετε επιλέξει δραστηριότητες. Επιστρέψτε στο Βήμα 4.'}
            </p>
        </div>
        
        <!-- ΚΟΥΜΠΙΑ ΔΙΑΧΕΙΡΙΣΗΣ -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
            <button onclick="initializeMap()" style="background: #3eb489; padding: 15px;">
                🗺️ Φόρτωση Χάρτη
            </button>
            <button onclick="addCustomMarker()" style="background: #9c27b0; padding: 15px;">
                📍 Προσθήκη Σημείου
            </button>
            <button onclick="showRouteInstructions()" style="background: #ff7f50; padding: 15px;">
                🚗 Οδηγίες
            </button>
            <button onclick="showStep5()" style="background: #6c757d; padding: 15px;">
                ↩️ Επιστροφή
            </button>
        </div>
        
        <!-- ΛΙΣΤΑ ΔΡΑΣΤΗΡΙΟΤΗΤΩΝ ΣΤΟΝ ΧΑΡΤΗ -->
        ${selectedActivities.length > 0 ? `
        <div class="card">
            <h3>🎯 Δραστηριότητες στον Χάρτη</h3>
            <div style="max-height: 300px; overflow-y: auto;">
                <ul style="list-style: none; padding: 0;">
                    ${selectedActivities.map((act, index) => `
                        <li style="padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>${act.name}</strong><br>
                                <small style="color: #666;">${act.desc}</small>
                            </div>
                            <button onclick="focusOnActivity(${index})" style="background: #4c7af0; padding: 5px 10px; font-size: 0.8em;">
                                🔍 Εστίαση
                            </button>
                        </li>
                    `).join('')}
                </ul>
            </div>
        </div>
        ` : ''}
        
        <!-- ΟΔΗΓΙΕΣ -->
        <div class="card" style="background: #e3f2fd; display: none;" id="route-instructions">
            <h3>🚗 Οδηγίες Μετακίνησης</h3>
            <div id="directions-content" style="padding: 15px; background: white; border-radius: 8px;">
                Επιλέξτε δύο σημεία στον χάρτη για οδηγίες
            </div>
            <button onclick="closeDirections()" style="background: #dc3545; margin-top: 10px;">
                Κλείσιμο Οδηγιών
            </button>
        </div>
    `;
    
    // Αν υπάρχουν δραστηριότητες, φόρτωσε τον χάρτη αυτόματα
    if (selectedActivities.length > 0) {
        setTimeout(() => {
            loadLeafletAndInitialize();
        }, 500);
    }
}

// Φόρτωση Leaflet JS και αρχικοποίηση χάρτη
function loadLeafletAndInitialize() {
    // Έλεγξε αν το Leaflet είναι ήδη φορτωμένο
    if (typeof L === 'undefined') {
        // Φόρτωσε το Leaflet JS
        const leafletJS = document.createElement('script');
        leafletJS.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
        leafletJS.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
        leafletJS.crossOrigin = '';
        
        leafletJS.onload = function() {
            console.log("✅ Leaflet φορτώθηκε!");
            initializeMap();
        };
        
        document.head.appendChild(leafletJS);
    } else {
        // Το Leaflet είναι ήδη φορτωμένο
        initializeMap();
    }
}

// Αρχικοποίηση χάρτη με πραγματικά δεδομένα
function initializeMap() {
    const destination = localStorage.getItem('destination');
    const selectedActivities = window.currentActivities ? 
        window.currentActivities.filter(act => act.selected) : [];
    
    // Συντεταγμένες για διάφορες πόλεις
    const cityCoordinates = {
        "Βιέννη": { lat: 48.2082, lng: 16.3738 },
        "Παρίσι": { lat: 48.8566, lng: 2.3522 },
        "Λονδίνο": { lat: 51.5074, lng: -0.1278 },
        "Ρώμη": { lat: 41.9028, lng: 12.4964 },
        "Βερολίνο": { lat: 52.5200, lng: 13.4050 },
        "Λισαβόνα": { lat: 38.7223, lng: -9.1393 },
        "Βουδαπέστη": { lat: 47.4979, lng: 19.0402 },
        "Πράγα": { lat: 50.0755, lng: 14.4378 },
        "Μαδρίτη": { lat: 40.4168, lng: -3.7038 },
        "Αθήνα": { lat: 37.9838, lng: 23.7275 }
    };
    
    // Προεπιλεγμένες συντεταγμένες
    const defaultCoords = cityCoordinates[destination] || { lat: 48.2082, lng: 16.3738 }; // Βιέννη
    
    // Δημιουργία χάρτη
    const map = L.map('map-container').setView([defaultCoords.lat, defaultCoords.lng], 13);
    
    // Προσθήκη OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors',
        maxZoom: 19
    }).addTo(map);
    
    // Προσθήκη marker για την πόλη
    L.marker([defaultCoords.lat, defaultCoords.lng])
        .addTo(map)
        .bindPopup(`<b>${destination || 'Προορισμός'}</b><br>Τοποθεσία προορισμού`)
        .openPopup();
    
    // Προσθήκη πινεζών για κάθε δραστηριότητα
    selectedActivities.forEach((activity, index) => {
        // Δημιουργία τυχαίων συντεταγμένων γύρω από το κέντρο (για demo)
        const lat = defaultCoords.lat + (Math.random() * 0.05 - 0.025);
        const lng = defaultCoords.lng + (Math.random() * 0.05 - 0.025);
        
        // Αποθήκευση συντεταγμένων για μετέπειτα χρήση
        activity.coordinates = { lat, lng };
        
        // Χρώμα ανάλογα με τον τύπο δραστηριότητας
        let color = 'blue';
        if (activity.name.includes('Παλάτι') || activity.name.includes('Μουσείο')) color = 'red';
        if (activity.name.includes('Πάρκο') || activity.name.includes('Γήπεδο')) color = 'green';
        if (activity.name.includes('Εστιατόριο') || activity.name.includes('Καφέ')) color = 'orange';
        
        // Προσθήκη marker
        const marker = L.marker([lat, lng], {
            icon: L.icon({
                iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34]
            })
        }).addTo(map);
        
        marker.bindPopup(`
            <div style="min-width: 200px;">
                <h4 style="margin: 0 0 10px 0;">${activity.name}</h4>
                <p style="margin: 0 0 10px 0;">${activity.desc}</p>
                <div style="background: #f8f9fa; padding: 8px; border-radius: 5px; margin: 10px 0;">
                    <strong>💰 Τιμή:</strong><br>
                    👨 Ενήλικας: ${activity.priceAdult}€<br>
                    🧒 Παιδί: ${activity.priceChild}€
                </div>
                <button onclick="getDirectionsToActivity(${index})" 
                        style="width: 100%; padding: 8px; background: #3eb489; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    🚗 Οδηγίες προς εδώ
                </button>
            </div>
        `);
        
        // Αποθήκευση για μετέπειτα χρήση
        window.mapMarkers = window.mapMarkers || [];
        window.mapMarkers.push({ marker, activity });
    });
    
    // Προσαρμογή zoom για να φαίνονται όλα τα markers
    if (selectedActivities.length > 0) {
        const bounds = L.latLngBounds(selectedActivities.map(a => [a.coordinates.lat, a.coordinates.lng]));
        map.fitBounds(bounds, { padding: [50, 50] });
    }
    
    // Αποθήκευση χάρτη για μετέπειτα χρήση
    window.travelMap = map;
    
    // Ενημέρωση χρήστη
    const message = document.createElement('div');
    message.textContent = `✅ Ο χάρτης φορτώθηκε με ${selectedActivities.length} δραστηριότητες`;
    message.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #3eb489; color: white; padding: 12px; border-radius: 8px; z-index: 1000;';
    document.body.appendChild(message);
    setTimeout(() => message.remove(), 3000);
}

// Εστίαση σε συγκεκριμένη δραστηριότητα
function focusOnActivity(index) {
    if (!window.travelMap || !window.currentActivities) return;
    
    const activity = window.currentActivities[index];
    if (activity && activity.coordinates) {
        window.travelMap.setView([activity.coordinates.lat, activity.coordinates.lng], 15);
        
        // Άνοιγμα popup αν υπάρχει marker
        if (window.mapMarkers && window.mapMarkers[index]) {
            window.mapMarkers[index].marker.openPopup();
        }
    }
}

// Προσθήκη custom marker από τον χρήστη
function addCustomMarker() {
    if (!window.travelMap) {
        alert("Πρέπει πρώτα να φορτώσετε τον χάρτη!");
        return;
    }
    
    const name = prompt("📌 Όνομα σημείου (π.χ. Το ξενοδοχείο μας):");
    if (!name) return;
    
    const type = prompt("🎯 Τύπος σημείου (1:🏨 Ξενοδοχείο, 2:🍽️ Εστιατόριο, 3:📍 Άλλο):");
    let iconColor = 'blue';
    let typeName = 'Σημείο';
    
    if (type === '1') {
        iconColor = 'red';
        typeName = '🏨 Ξενοδοχείο';
    } else if (type === '2') {
        iconColor = 'orange';
        typeName = '🍽️ Εστιατόριο';
    }
    
    // Ο χρήστης θα κάνει κλικ στον χάρτη
    alert("🖱️ Κάντε κλικ στον χάρτη για να προσθέσετε το σημείο!");
    
    let clickHandler = null;
    
    clickHandler = function(e) {
        // Αφαίρεση του event listener
        window.travelMap.off('click', clickHandler);
        
        // Προσθήκη marker
        const marker = L.marker([e.latlng.lat, e.latlng.lng], {
            icon: L.icon({
                iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${iconColor}.png`,
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34]
            })
        }).addTo(window.travelMap);
        
        marker.bindPopup(`
            <div style="min-width: 200px;">
                <h4 style="margin: 0 0 10px 0;">${name}</h4>
                <p style="margin: 0 0 10px 0;">${typeName}</p>
                <small>Προσθέθηκε από εσάς</small>
                <button onclick="removeCustomMarker(this)" 
                        data-lat="${e.latlng.lat}" data-lng="${e.latlng.lng}"
                        style="width: 100%; padding: 6px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">
                    🗑️ Διαγραφή
                </button>
            </div>
        `).openPopup();
        
        // Αποθήκευση custom marker
        window.customMarkers = window.customMarkers || [];
        window.customMarkers.push({ marker, name, type: typeName });
        
        alert(`✅ Προστέθηκε το σημείο "${name}"!`);
    };
    
    window.travelMap.on('click', clickHandler);
}

// Διαγραφή custom marker
function removeCustomMarker(button) {
    const lat = button.getAttribute('data-lat');
    const lng = button.getAttribute('data-lng');
    
    if (window.customMarkers) {
        const index = window.customMarkers.findIndex(m => 
            m.marker.getLatLng().lat === parseFloat(lat) && 
            m.marker.getLatLng().lng === parseFloat(lng)
        );
        
        if (index !== -1) {
            window.travelMap.removeLayer(window.customMarkers[index].marker);
            window.customMarkers.splice(index, 1);
            alert("🗑️ Το σημείο διαγράφηκε!");
        }
    }
}

// Οδηγίες προς δραστηριότητα
function getDirectionsToActivity(index) {
    if (!window.currentActivities || !window.currentActivities[index]) return;
    
    const activity = window.currentActivities[index];
    const destination = localStorage.getItem('destination');
    const cityCoords = {
        "Βιέννη": "48.2082,16.3738",
        "Παρίσι": "48.8566,2.3522",
        "Λονδίνο": "51.5074,-0.1278",
        "Ρώμη": "41.9028,12.4964",
        "Βερολίνο": "52.5200,13.4050"
    };
    
    let startCoords = cityCoords[destination] || "48.2082,16.3738";
    let endCoords = `${activity.coordinates.lat},${activity.coordinates.lng}`;
    
    // Άνοιγμα Google Maps με οδηγίες
    const googleMapsUrl = `https://www.google.com/maps/dir/${startCoords}/${endCoords}`;
    window.open(googleMapsUrl, '_blank');
}

// Εμφάνιση οδηγιών μεταξύ σημείων
function showRouteInstructions() {
    if (!window.mapMarkers || window.mapMarkers.length < 2) {
        alert("Χρειάζονται τουλάχιστον 2 σημεία στον χάρτη για οδηγίες!");
        return;
    }
    
    const instructionsDiv = document.getElementById('route-instructions');
    const contentDiv = document.getElementById('directions-content');
    
    if (!instructionsDiv || !contentDiv) return;
    
    let html = '<h4>🚗 Επιλογή Σημείων:</h4>';
    
    window.mapMarkers.forEach((item, index) => {
        html += `
            <div style="padding: 8px; border: 1px solid #ddd; margin: 5px 0; border-radius: 4px; cursor: pointer;" 
                 onclick="selectForRoute(${index})" id="route-point-${index}">
                ${index + 1}. ${item.activity.name}
            </div>
        `;
    });
    
    html += `
        <div style="margin-top: 15px;">
            <button onclick="calculateRoute()" style="background: #3eb489; color: white; padding: 10px; border: none; border-radius: 4px; cursor: pointer;">
                🧮 Υπολογισμός Διαδρομής
            </button>
            <button onclick="clearRouteSelection()" style="background: #6c757d; color: white; padding: 10px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">
                🗑️ Καθαρισμός
            </button>
        </div>
    `;
    
    contentDiv.innerHTML = html;
    instructionsDiv.style.display = 'block';
    
    // Αποθήκευση επιλογών
    window.routeSelection = [];
}

// Επιλογή σημείου για διαδρομή
function selectForRoute(index) {
    window.routeSelection = window.routeSelection || [];
    
    if (window.routeSelection.includes(index)) {
        // Αφαίρεση αν είναι ήδη επιλεγμένο
        window.routeSelection = window.routeSelection.filter(i => i !== index);
        document.getElementById(`route-point-${index}`).style.background = 'white';
    } else if (window.routeSelection.length < 2) {
        // Προσθήκη αν υπάρχει χώρος
        window.routeSelection.push(index);
        document.getElementById(`route-point-${index}`).style.background = '#e8f5e9';
    } else {
        alert("Μπορείτε να επιλέξετε μέχρι 2 σημεία για διαδρομή!");
    }
}

// Υπολογισμός διαδρομής
function calculateRoute() {
    if (!window.routeSelection || window.routeSelection.length !== 2) {
        alert("Παρακαλώ επιλέξτε ακριβώς 2 σημεία!");
        return;
    }
    
    const [startIdx, endIdx] = window.routeSelection;
    const start = window.mapMarkers[startIdx];
    const end = window.mapMarkers[endIdx];
    
    if (!start || !end) return;
    
    const startCoords = `${start.marker.getLatLng().lat},${start.marker.getLatLng().lng}`;
    const endCoords = `${end.marker.getLatLng().lat},${end.marker.getLatLng().lng}`;
    
    const googleMapsUrl = `https://www.google.com/maps/dir/${startCoords}/${endCoords}`;
    
    const contentDiv = document.getElementById('directions-content');
    contentDiv.innerHTML = `
        <h4>🗺️ Διαδρομή από:</h4>
        <p><strong>📍 Από:</strong> ${start.activity.name}</p>
        <p><strong>📍 Προς:</strong> ${end.activity.name}</p>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <h5>🚗 Οδηγίες Μετακίνησης:</h5>
            <p>Για λεπτομερείς οδηγίες, ανοίξτε το Google Maps:</p>
            <a href="${googleMapsUrl}" target="_blank" 
               style="display: block; padding: 12px; background: #4c7af0; color: white; text-align: center; text-decoration: none; border-radius: 8px; margin: 10px 0;">
                📱 Άνοιγμα Google Maps
            </a>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
            <div style="text-align: center; padding: 10px; background: #e8f5e9; border-radius: 5px;">
                <div style="font-size: 24px;">📍</div>
                <div><strong>${start.activity.name}</strong></div>
            </div>
            <div style="text-align: center; padding: 10px; background: #e3f2fd; border-radius: 5px;">
                <div style="font-size: 24px;">🎯</div>
                <div><strong>${end.activity.name}</strong></div>
            </div>
        </div>
    `;
}

// Καθαρισμός επιλογών διαδρομής
function clearRouteSelection() {
    window.routeSelection = [];
    document.querySelectorAll('[id^="route-point-"]').forEach(el => {
        el.style.background = 'white';
    });
}

// Κλείσιμο οδηγιών
function closeDirections() {
    document.getElementById('route-instructions').style.display = 'none';
    clearRouteSelection();
}
        
// Βοηθητική: Κατηγοριοποίηση ηλικιών
function categorizeFamilyMembers() {
    const groups = {
        "0-2": 0, "3-5": 0, "6-14": 0, "15-19": 0, "20+": 0
    };
    
    familyMembers.forEach(member => {
        const age = parseInt(member.age);
        if (age <= 2) groups["0-2"]++;
        else if (age <= 5) groups["3-5"]++;
        else if (age <= 14) groups["6-14"]++;
        else if (age <= 19) groups["15-19"]++;
        else groups["20+"]++;
    });
    
    return groups;
}

function searchHotels() {
    const city = document.getElementById('hotel-city').value || localStorage.getItem('destination');
    window.open(`https://www.booking.com/searchresults.el.html?ss=${city}`, '_blank');
}

// ==================== ΠΛΟΗΓΗΣΗ SIDEBAR ====================

document.querySelectorAll('.step').forEach(step => {
    step.addEventListener('click', function() {
        const stepId = this.getAttribute('data-step');
        
        console.log("🔍 Κλικ στο βήμα:", stepId);
        
        // Ενημέρωση ενεργού
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        this.classList.add('active');
        
        // Εμφάνιση βήματος
        if (stepId === 'destination') showStep1();
        else if (stepId === 'flight') showStep2();
        else if (stepId === 'hotel') showStep3();
        else if (stepId === 'activities') showStep4();
        else if (stepId === 'summary') {
            console.log("🎯 Καλείται showStep5()");
            if (typeof showStep5 === 'function') {
                showStep5();
            } else {
                console.error("❌ Η showStep5 ΔΕΝ είναι function!");
                alert("⚠️ Προσωρινό σφάλμα. Παρακαλώ κάντε refresh τη σελίδα.");
            }
        }
        else if (stepId === 'map') showStep6();
    });
});

// ==================== ΕΝΑΡΞΗ ====================

window.onload = function() {
    console.log("✅ Η σελίδα φορτώθηκε");
    showStep1();
};
    </script>
</body>
</html>
